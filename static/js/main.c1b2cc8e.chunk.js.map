{"version":3,"sources":["serviceWorker.js","data/tile_data.js","data/warp_data.js","map-components.js","map-logic.js","download-helpers.js","editors/base-editor.js","utilities.js","editors/map-editor.js","editors/layout-editor.js","evaluator-components.js","editors/eval-editor.js","index.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","PLANET_TRAITS","TECH_SPECIALTIES","ANOMALIES","WORMHOLES","planet_data","WARFARE","PROPULSION","CYBERNETIC","BIOTIC","HAZARDOUS","system_data","WARP_DIRECTIONS","warp_configs","NORTH","SOUTHEAST","SOUTH","SOUTHWEST","NORTHEAST","NORTHWEST","getHexSizeFromScreen","innerWidth","SystemBankComponent","int_select","document","getElementById","options","selectedIndex","value","new_value","this","getSelectValue","props","setActiveSystem","systems","getSystemByID","parseInt","e","togglePoKExpansion","toggleTEExpansion","toggleBaseSystems","hexSize","key","system","push","id","getStringName","selected_value","system_to_display","className","active_system","format","system_format","posStyle","onClick","draggable","onDrag","event","onSelectedSystemDrag","onDragEnd","onSystemDragEnd","onDrop","onSystemDropped","eval_variables","onDragOver","preventDefault","type","checked","include_base_systems","onChange","handleBaseCheckboxChange","htmlFor","include_pok_expansion_systems","handlePoKExpansionCheckboxChange","include_te_expansion_systems","handleTEExpansionCheckboxChange","handleSelectChange","disabled","selectNoSystems","React","Component","MapComponent","system_box","setState","Object","assign","updateDimensions","addEventListener","bind","removeEventListener","home_stats","map","getHomeSystemStats","cw","ch","spaces","length","mapHeight","hexSpace","mapWidth","mapCenterH","mapCenterV","display","index","space","is_draggable","MAP_SPACE_TYPES","SYSTEM","systems_draggable","isMecatolRexSystem","home_value","these_stats","HOME","home_values","toString","stat_container","getObjFromCoord","stats","clickedSpace","onSystemDrag","entries","mapStyle","map_class","style","HexComponent","onDragStart","outlined","hexClass","points","svgElements","children","MapSpaceComponent","spaceOffsetV","spaceOffsetH","x","y","z","getPositionStyle","OPEN","home_text","CLOSED","WARP","warps","warp_spaces","WarpComponent","coords","warp_lines","one_warp","start_coords","get_endpoint_coords","end_coords","x1","y1","x2","y2","SYSTEM_FORMATS","SystemComponent","id_div","extras","value_div","planets","evaluate","wormhole","anomalies","anomalyClasses","includes","rex_class","hex_props","isLegendary","ID_ONLY","STREAMLINED_WITH_NAME","planet","name","PLANET_FORMATS","STREAMLINED","COLORBLIND_FRIENDLY","COLORBLIND_FRIENDLY_WITH_NAME","PlanetComponent","trait_class","trait_abbr","traits","tech_class","tech_abbr","tech_specialties","scount","tech_specialty","sffx","legendary_class","space_station_class","name_stuff","values","resources","influence","PLANET_EVAL_STRATEGIES","Planet","obj_data","variables","v","data","BASE_PLANET_MOD","r","RESOURCES_MULTIPLIER","i","INFLUENCE_MULTIPLIER","t","TECH_MOD","TECH_WARFARE_MOD","TECH_PROPULSION_MOD","TECH_BIOTIC_MOD","TECH_CYBERNETIC_MOD","PLANET_STRATEGY","to_add","to_add_t","high_one","NONZERO_RESOURCES_MOD","NONZERO_INFLUENCE_MOD","TRAIT_CULTURAL_MOD","TRAIT_HAZARDOUS_MOD","TRAIT_INDUSTRIAL_MOD","PlanetBox","one_planet_data","one_planet","System","planet_box","planet_name","plToAdd","getPlanetByName","SINGLE_PLANET_MOD","MULTI_PLANET_MOD","some","trait","MATCHING_PLANETS_MOD","NONMATCHING_PLANETS_MOD","MECATOL_REX_SYS_MOD","LEGENDARY_PLANET_SYS_MOD","isSpaceStation","SPACE_STATION_SYS_MOD","through_wh","DISTANCE_MOD_BASE","isBlue","DISTANCE_MOD_PLANET","DISTANCE_MOD_PLANET_WORMHOLE","DISTANCE_MOD_EMPTY_WORMHOLE","DISTANCE_MOD_EMPTY","anomaly","DISTANCE_MOD_ASTEROID_FIELD","DISTANCE_MOD_GRAVITY_RIFT","DISTANCE_MOD_NEBULA","DISTANCE_MOD_SUPERNOVA","DISTANCE_MOD_ENTROPIC_SCAR","isRed","name_array","tech","join","SystemBox","one_system_data","total","splice","sysindex","getSystemIndexByID","new_system_box","one_system","systems_to_return","one_sys","getDistanceMultiplier","modded_distance","d","DISTANCE_MULTIPLIER","Map","load_default","starting_space","iterations","addAdjacentSpaces","new_map","one_space","new_space","MapSpace","system_id","getSpaceBySystemID","space_a","space_b","max","checked_spaces","new_to_check_adj","areCoordsInList","new_new_check","new_adj","getAdjacentSpacesIncludingWormholes","one_adj","nonhomes","home","slice","best","winner","dis","findSpaceDistance","final_stats","one_stat","techs","split","sort","ind","cul","haz","one_warp_dir","doesWarpDirectionConnect","warp_direction","spaceItGoes","getWarpDirectionCoordinates","oppositeDirection","directions_to_check","one_next_warp","one_direction","filter","is_legal","map_space","getAdjacentSystems","coords1","coords2","home_total","Math","abs","evaluation","shortest_distance","_getShortestModdedDistance","start_space","dest_space","finished_paths","act_paths","first_steps","getAdjacentSystemsIncludingWormholes","one_step","getDistanceModifier","getMapDistanceModifier","new_path","new_active_paths","one_path","results","_extendPath","finished","one_done","ongoing","one_ongoing","first_yet","shortest","path_length","_calculateModdedDistanceFromRaw","path","completed_paths","ongoing_paths","last_step","next_steps","path_copy","modded_dist","one_index","wh","getAdjacentSpaces","adj_spaces","DISTANCE_MOD_ADJACENT_TO_OPPONENT","coords_to_add","adjacent_coords","getAdjacentCoordinates","one_adjacent_coords","one_coords_to_add","system_space","warp_space","adj_systems","direction_from","warps_to_follow","one_warp_direction","next_space","farther_systems","_getAdjacentSpacesThroughWarps","one_far_sys","adj_coords","potential_space","potential_systems","one_system_space","wh_systems","getMatchingWormholeSpaces","one_whs","matching_spaces","list","existing_coords","JSONDownloadButton","string","downloadInfo","getDownloadInfo","filename","text","element","createElement","setAttribute","encodeURIComponent","body","appendChild","click","removeChild","download","replace","toLowerCase","JSON","stringify","downloadJSON","title","JSONUploadButton","fr","FileReader","readAsText","files","onload","oFREvent","handleJSON","parse","target","result","handleUpload","jQuery","$","BaseEditor","default_layouts","ls","get","storage_key","getNewStringValue","message","setNoMessage","sendStateBeforeDeath","one_space_data","space_system","spaces_data","space_data","l_title","val","getJSONDataFromSpaces","getCurrentLayoutJSON","subject_plural","selected_item","getLayoutFromJSON","loadedTitle","new_message","subject","setMap","saved_data","dataToSave","set","setLayout","currentIndex","new_selected","toDel","getNewLayout","remove","syncBankSystems","compareByID","a","b","MapEditor","starting_layout","selected_bank_system","draggedSystem","option_pair_wormholes","option_include_all_wormholes","target_blue_total","bank_systems","eval_option","default_variables","balance_difference","map_string","balance_options","long_op","state_to_import","matching_options","getOptions","option","matching_evals","getEvalOptions","eval_var","isComplete","getHomeValues","getBalanceDifference","getMapString","containsSystem","new_check","getSelectNewMapValue","getSelectNewMapType","loadCustomLayout","loadDefault","valIndex","e_kind","e_index","e_var","eval_storage_key","substr","space_index","makeCopy","is_changed","old_space","replaced_system","isChecked","int_value","toLoad","layout_storage_key","final_string","is_first","coord_order","map_string_order","one_coor","new_bank","id_list","coord_list","one_id_string","one_id","newState","isChanged","replacement_system","setTimeout","autoComplete","map_history","gotamap","_autoCompleteSteps","current_history","steps_forward","current_try_total","backwards_length","starting_length","tries","new_history","_addOneSystem","steps_forward_add","pop","newest_history","avail_sys_pool","can_add","getWormholeSystems","getOpenSpacesTotal","total_needed","b_holes","a_holes","target_ratio","getPossibleSystemTotal","current_ratio","getBlueSystemTotal","getRedSystemTotal","replacement_pool","chosen_system","floor","random","avail_space_pool","chosen_space_index","new_box","isLegal","evars","getHomeValue","min","one_home_key","hasOwnProperty","which_option","improveBalance","Promise","resolve","eligible_system_spaces","dont_move_wormholes","dont_move_anomalies","dont_move_empty","j","shuffle","found_it","new_hv","new_diff","evaluations","fromEntries","one_default","evals","one_saved","one_custom_l","areWarpsLogical","include_expansion_systems","is_complete","opt","eval_options","auto_complete_ratios","red_total","blue_total","open_spaces","blue_avail","red_avail","s","bal_diff","getAllLayoutJSONFileInfo","deleteAll","addLayoutsFromJSON","input_title","saveCurrent","deleteCurrent","isSelectNew","getCurrentLayoutJSONFileInfo","handleFormatDisplayChange","loadMapFromString","getMessageHtml","handleIncludeWormholesChange","handlePairWormholesChange","handleTargetRatioChange","autoCompleteStart","getTotalOpen","handleEvalChange","handleBalanceOptionChange","improveBalanceStart","setActiveBankSystem","getTotalResources","getTotalInfluence","getTotalTechSpecialties","getPlanetTraitTotals","LayoutEditor","show_warps","show_wormholes","show_anomalies","setNewLayout","what","go_next_type","_getNextWarp","_getNextSystem","keep_going","proposed_warp","proposed_config","one_coord","eligible_systems","current_id","defaults","handleWarpChange","handleWormholeChange","handleAnomaliesChange","EVAL_ASPECTS","EvaluatorLine","null_box","nul_val","num_value","hasNullBox","onNullChange","label","m","onInputChange","helperText","EvaluatorForm","which_aspect","distance","changeHandler","reportChange","reportNullChange","EvaluationEditor","default_evaluators","new_values","setValuesFull","new_eval","setValues","SCREENS","MapLabNavigator","MAP_EDITOR","map_state","layout_state","eval_state","which_screen","SYSTEM_EVALUATOR","LAYOUT_EDITOR","new_screen","screen_return","active_screen","state_to_store","storeState","INSTRUCTIONS","role","aria-label","aria-expanded","toggleClass","aria-hidden","changeScreen","ReactDOM","render","URL","process","href","origin","fetch","response","contentType","headers","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.c1b2cc8e.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const PLANET_TRAITS = {\n    \"HAZARDOUS\": 0,\n    \"INDUSTRIAL\": 1,\n    \"CULTURAL\": 2,\n};\n\nexport const TECH_SPECIALTIES = {\n    \"BIOTIC\": 0,\n    \"WARFARE\": 1,\n    \"PROPULSION\": 2,\n    \"CYBERNETIC\": 3,\n};\n\nexport const ANOMALIES = {\n    \"NEBULA\": 0,\n    \"GRAVITY_RIFT\": 1,\n    \"ASTEROID_FIELD\": 2,\n    \"SUPERNOVA\": 3,\n    \"ENTROPIC_SCAR\": 4,\n};\n\nexport const WORMHOLES = {\n    \"ALPHA\": 0,\n    \"BETA\": 1,\n    \"DELTA\": 2,\n};\n\nexport let planet_data = [\n    {\n        \"name\": \"Mecatol Rex\",\n        \"traits\": null,\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 6,\n    },\n    {\n        \"name\": \"Abyz\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 3,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Fria\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Arinam\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Meer\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": [TECH_SPECIALTIES.WARFARE],\n        \"resources\": 0,\n        \"influence\": 4,\n    },\n    {\n        \"name\": \"Arnor\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Lor\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Bereg\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 3,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Lirta IV\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Centauri\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Gral\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.PROPULSION],\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Corneeq\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Resculon\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Dal Bootha\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 0,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Xxehan\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Lazar\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.CYBERNETIC],\n        \"resources\": 1,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Sakulag\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Lodor\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 3,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Mehar Xull\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": [TECH_SPECIALTIES.WARFARE],\n        \"resources\": 1,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Mellon\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 0,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Zohbat\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 3,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"New Albion\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.BIOTIC],\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Starpoint\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 3,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Quann\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Qucen'n\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Rarron\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 0,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Saudor\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Tar'Mann\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.BIOTIC],\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Tequ'ran\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Torkan\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 0,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Thibah\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.PROPULSION],\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Vefut II\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Wellon\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.CYBERNETIC],\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Archon Vail\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": [TECH_SPECIALTIES.PROPULSION],\n        \"resources\": 1,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Perimeter\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Ang\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.WARFARE],\n        \"resources\": 2,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Sem-Lore\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.CYBERNETIC],\n        \"resources\": 3,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Vorhal\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.BIOTIC],\n        \"resources\": 0,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Atlas\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 3,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Primor\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Hope's End\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 3,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Cormund\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Everra\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 3,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Accoen\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Joel Ir\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Kraag\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Siig\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 0,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Alio Prima\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Ba'kal\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 3,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Lisis\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Velnor\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.WARFARE],\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Cealdri\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.CYBERNETIC],\n        \"resources\": 0,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Xanhact\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 0,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Vega Major\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Vega Minor\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.PROPULSION],\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Abaddon\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Ashtroth\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Loki\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Rigel I\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 0,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Rigel II\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Rigel III\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.BIOTIC],\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Faunus\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.BIOTIC],\n        \"resources\": 1,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Garbozia\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Emelpar\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 0,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Tempesta\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": [TECH_SPECIALTIES.PROPULSION],\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Olergodt\",\n        \"traits\": [PLANET_TRAITS.CULTURAL, PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": [TECH_SPECIALTIES.CYBERNETIC, TECH_SPECIALTIES.WARFARE],\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Andeara\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.PROPULSION],\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Vira-Pics III\",\n        \"traits\": [PLANET_TRAITS.CULTURAL, PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"Lesab\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS, PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"New Terra\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Tinnes\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS, PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.BIOTIC],\n        \"resources\": 2,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Cresius\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 0,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Lazul Rex\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL, PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Tiamat\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.CYBERNETIC, TECH_SPECIALTIES.CYBERNETIC],\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Hercalor\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Kostboth\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 0,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Capha\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 3,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Bellatrix\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Tsion Station\",\n        \"traits\": null,\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Horizon\",\n        \"traits\": [PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"El'Nath\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 2,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Luthien VI\",\n        \"traits\": [PLANET_TRAITS.HAZARDOUS],\n        \"tech_specialties\": null,\n        \"resources\": 3,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Tarana\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL, PLANET_TRAITS.CULTURAL],\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 2,\n    },\n    {\n        \"name\": \"Oluz Station\",\n        \"traits\": null,\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n    {\n        \"name\": \"Industrex\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": [TECH_SPECIALTIES.HAZARDOUS],\n        \"resources\": 2,\n        \"influence\": 0,\n    },\n    {\n        \"name\": \"Lemox\",\n        \"traits\": [PLANET_TRAITS.INDUSTRIAL],\n        \"tech_specialties\": null,\n        \"resources\": 0,\n        \"influence\": 3,\n    },\n    {\n        \"name\": \"The Watchtower\",\n        \"traits\": null,\n        \"tech_specialties\": null,\n        \"resources\": 1,\n        \"influence\": 1,\n    },\n];\n\nexport let system_data = [\n    {\n        \"id\": 18,\n        \"planets\": [\"Mecatol Rex\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 39,\n        \"planets\": [],\n        \"anomalies\": null,\n        \"wormhole\": WORMHOLES.ALPHA,\n    },\n    {\n        \"id\": 43,\n        \"planets\": [],\n        \"anomalies\": [ANOMALIES.SUPERNOVA],\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 46,\n        \"planets\": [],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 49,\n        \"planets\": [],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 44,\n        \"planets\": [],\n        \"anomalies\": [ANOMALIES.ASTEROID_FIELD],\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 40,\n        \"planets\": [],\n        \"anomalies\": null,\n        \"wormhole\": WORMHOLES.BETA,\n    },\n    {\n        \"id\": 48,\n        \"planets\": [],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 45,\n        \"planets\": [],\n        \"anomalies\": [ANOMALIES.ASTEROID_FIELD],\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 47,\n        \"planets\": [],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 42,\n        \"planets\": [],\n        \"anomalies\": [ANOMALIES.NEBULA],\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 50,\n        \"planets\": [],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 41,\n        \"planets\": [],\n        \"anomalies\": [ANOMALIES.GRAVITY_RIFT],\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 32,\n        \"planets\": [\"Dal Bootha\", \"Xxehan\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 26,\n        \"planets\": [\"Lodor\"],\n        \"anomalies\": null,\n        \"wormhole\": WORMHOLES.ALPHA,\n    },\n    {\n        \"id\": 29,\n        \"planets\": [\"Qucen'n\", \"Rarron\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 38,\n        \"planets\": [\"Abyz\", \"Fria\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 22,\n        \"planets\": [\"Tar'Mann\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 21,\n        \"planets\": [\"Thibah\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 33,\n        \"planets\": [\"Corneeq\", \"Resculon\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 19,\n        \"planets\": [\"Wellon\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 28,\n        \"planets\": [\"Tequ'ran\", \"Torkan\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 24,\n        \"planets\": [\"Mehar Xull\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 37,\n        \"planets\": [\"Arinam\", \"Meer\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 30,\n        \"planets\": [\"Mellon\", \"Zohbat\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 20,\n        \"planets\": [\"Vefut II\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 27,\n        \"planets\": [\"New Albion\", \"Starpoint\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 23,\n        \"planets\": [\"Saudor\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 31,\n        \"planets\": [\"Lazar\", \"Sakulag\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 35,\n        \"planets\": [\"Bereg\", \"Lirta IV\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 34,\n        \"planets\": [\"Centauri\", \"Gral\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 36,\n        \"planets\": [\"Arnor\", \"Lor\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 25,\n        \"planets\": [\"Quann\"],\n        \"anomalies\": null,\n        \"wormhole\": WORMHOLES.BETA,\n    },\n    {\n        \"id\": 59,\n        \"planets\": [\"Archon Vail\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 60,\n        \"planets\": [\"Perimeter\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 61,\n        \"planets\": [\"Ang\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 62,\n        \"planets\": [\"Sem-Lore\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 63,\n        \"planets\": [\"Vorhal\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 64,\n        \"planets\": [\"Atlas\"],\n        \"anomalies\": null,\n        \"wormhole\": WORMHOLES.BETA,\n    },\n    {\n        \"id\": 65,\n        \"planets\": [\"Primor\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 66,\n        \"planets\": [\"Hope's End\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 67,\n        \"planets\": [\"Cormund\"],\n        \"anomalies\": [ANOMALIES.GRAVITY_RIFT],\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 68,\n        \"planets\": [\"Everra\"],\n        \"anomalies\": [ANOMALIES.NEBULA],\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 69,\n        \"planets\": [\"Accoen\", \"Joel Ir\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 70,\n        \"planets\": [\"Kraag\", \"Siig\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 71,\n        \"planets\": [\"Alio Prima\", \"Ba'kal\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 72,\n        \"planets\": [\"Lisis\", \"Velnor\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 73,\n        \"planets\": [\"Cealdri\", \"Xanhact\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 74,\n        \"planets\": [\"Vega Major\", \"Vega Minor\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 75,\n        \"planets\": [\"Abaddon\", \"Ashtroth\", \"Loki\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 76,\n        \"planets\": [\"Rigel I\", \"Rigel II\", \"Rigel III\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 77,\n        \"planets\": [],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 78,\n        \"planets\": [],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 79,\n        \"planets\": [],\n        \"anomalies\": [ANOMALIES.ASTEROID_FIELD],\n        \"wormhole\": WORMHOLES.ALPHA,\n    },\n    {\n        \"id\": 80,\n        \"planets\": [],\n        \"anomalies\": [ANOMALIES.SUPERNOVA],\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 97,\n        \"planets\": [\"Faunus\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 98,\n        \"planets\": [\"Garbozia\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 99,\n        \"planets\": [\"Emelpar\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 100,\n        \"planets\": [\"Tempesta\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 101,\n        \"planets\": [\"Olergodt\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 102,\n        \"planets\": [\"Andeara\"],\n        \"anomalies\": null,\n        \"wormhole\": WORMHOLES.ALPHA,\n    },\n    {\n        \"id\": 103,\n        \"planets\": [\"Vira-Pics III\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 104,\n        \"planets\": [\"Lesab\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 105,\n        \"planets\": [\"New Terra\", \"Tinnes\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 106,\n        \"planets\": [\"Cresius\", \"Lazul Rex\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 107,\n        \"planets\": [\"Tiamat\", \"Hercalor\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 108,\n        \"planets\": [\"Kostboth\", \"Capha\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 109,\n        \"planets\": [\"Bellatrix\", \"Tsion Station\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 110,\n        \"planets\": [\"Horizon\", \"El'Nath\", \"Luthien VI\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 111,\n        \"planets\": [\"Tarana\", \"Oluz Station\"],\n        \"anomalies\": null,\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 113,\n        \"planets\": [],\n        \"anomalies\": [ANOMALIES.GRAVITY_RIFT],\n        \"wormhole\": WORMHOLES.BETA,\n    },\n    {\n        \"id\": 114,\n        \"planets\": [],\n        \"anomalies\": [ANOMALIES.ENTROPIC_SCAR],\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 115,\n        \"planets\": [\"Industrex\"],\n        \"anomalies\": [ANOMALIES.ASTEROID_FIELD],\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 116,\n        \"planets\": [\"Lemox\"],\n        \"anomalies\": [ANOMALIES.ENTROPIC_SCAR],\n        \"wormhole\": null,\n    },\n    {\n        \"id\": 117,\n        \"planets\": [\"The Watchtower\"],\n        \"anomalies\": [ANOMALIES.ASTEROID_FIELD, ANOMALIES.GRAVITY_RIFT],\n        \"wormhole\": null,\n    },\n];\n","export const WARP_DIRECTIONS = {\n    \"NORTH\": {\"x\": 0, \"y\": 1, \"z\": -1},\n    \"NORTHEAST\": {\"x\": 1, \"y\": 0, \"z\": -1},\n    \"SOUTHEAST\": {\"x\": 1, \"y\": -1, \"z\": 0},\n    \"SOUTH\": {\"x\": 0, \"y\": -1, \"z\": 1},\n    \"SOUTHWEST\": {\"x\": -1, \"y\": 0, \"z\": 1},\n    \"NORTHWEST\": {\"x\": -1, \"y\": 1, \"z\": 0},\n};\n\nexport let warp_configs = [\n    [\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTHEAST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTH],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTH],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.NORTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.NORTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTH, WARP_DIRECTIONS.NORTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTHEAST],\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTH],\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.NORTHWEST],\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTH],\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.NORTH],\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.NORTHWEST],\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTH, WARP_DIRECTIONS.NORTH],\n        [WARP_DIRECTIONS.SOUTH, WARP_DIRECTIONS.NORTHWEST],\n        [WARP_DIRECTIONS.SOUTH, WARP_DIRECTIONS.NORTHEAST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTHWEST, WARP_DIRECTIONS.NORTH],\n        [WARP_DIRECTIONS.SOUTHWEST, WARP_DIRECTIONS.NORTHEAST],\n        [WARP_DIRECTIONS.SOUTHWEST, WARP_DIRECTIONS.SOUTHEAST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHWEST, WARP_DIRECTIONS.SOUTHEAST],\n        [WARP_DIRECTIONS.NORTHWEST, WARP_DIRECTIONS.SOUTH],\n        [WARP_DIRECTIONS.NORTHWEST, WARP_DIRECTIONS.NORTHEAST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHWEST, WARP_DIRECTIONS.SOUTH],\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTH],\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTHEAST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTHWEST],\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTH],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.NORTHWEST],\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.NORTHWEST],\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTH],\n        [WARP_DIRECTIONS.SOUTH, WARP_DIRECTIONS.NORTHEAST],\n        [WARP_DIRECTIONS.SOUTHWEST, WARP_DIRECTIONS.NORTH],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n        [WARP_DIRECTIONS.SOUTHWEST, WARP_DIRECTIONS.SOUTHEAST],\n        [WARP_DIRECTIONS.NORTHWEST, WARP_DIRECTIONS.NORTHEAST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.NORTHWEST],\n        [WARP_DIRECTIONS.NORTHWEST, WARP_DIRECTIONS.SOUTH],\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTHEAST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTH],\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.NORTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.NORTHWEST],\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.NORTH],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTH],\n        [WARP_DIRECTIONS.SOUTH, WARP_DIRECTIONS.NORTHEAST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n        [WARP_DIRECTIONS.SOUTHWEST, WARP_DIRECTIONS.SOUTHEAST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.NORTHWEST],\n        [WARP_DIRECTIONS.NORTHWEST, WARP_DIRECTIONS.SOUTH],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTH],\n        [WARP_DIRECTIONS.NORTH, WARP_DIRECTIONS.SOUTHEAST],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n        [WARP_DIRECTIONS.NORTHEAST, WARP_DIRECTIONS.SOUTH],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.NORTHWEST],\n        [WARP_DIRECTIONS.SOUTHEAST, WARP_DIRECTIONS.SOUTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTH, WARP_DIRECTIONS.NORTH],\n        [WARP_DIRECTIONS.SOUTH, WARP_DIRECTIONS.NORTHWEST],\n    ],\n    [\n        [WARP_DIRECTIONS.SOUTHWEST, WARP_DIRECTIONS.NORTHEAST],\n        [WARP_DIRECTIONS.SOUTHWEST, WARP_DIRECTIONS.NORTH],\n    ],\n    [\n        [WARP_DIRECTIONS.NORTHWEST, WARP_DIRECTIONS.SOUTHEAST],\n        [WARP_DIRECTIONS.NORTHWEST, WARP_DIRECTIONS.NORTHEAST],\n    ],\n];\n","import React from 'react';\nimport {ANOMALIES, PLANET_TRAITS, TECH_SPECIALTIES, WORMHOLES} from \"./data/tile_data\";\nimport {warp_configs, WARP_DIRECTIONS} from \"./data/warp_data\";\nimport {getObjFromCoord} from './map-logic';\n\nconst hexSpace = 6;\n\nfunction getHexSizeFromScreen() {\n    if(window.innerWidth >= 1024) {\n        return 110;\n    } else if(window.innerWidth >= 769) {\n        return 80;\n    } else {\n        return 55;\n    }\n}\n\nexport class SystemBankComponent extends React.Component {\n\n    getSelectValue() {\n        let int_select = document.getElementById(\"system-bank-select\");\n        return int_select.options[int_select.selectedIndex].value;\n    }\n\n    handleSelectChange() {\n        let new_value = this.getSelectValue();\n        if(new_value === \"none\") {\n            this.props.setActiveSystem(null);\n        } else {\n            this.props.setActiveSystem(\n                this.props.systems.getSystemByID(parseInt(new_value))\n            );\n        }\n    }\n\n    handlePoKExpansionCheckboxChange(e) {\n        this.props.togglePoKExpansion();\n    }\n    handleTEExpansionCheckboxChange(e) {\n        this.props.toggleTEExpansion();\n    }\n    handleBaseCheckboxChange(e) {\n        this.props.toggleBaseSystems();\n    }\n\n    selectNoSystems() {\n        this.props.setActiveSystem(null);\n    }\n\n    render() {\n        let hexSize = getHexSizeFromScreen();\n\n        let options = [(<option value=\"none\" key=\"sys_none\">(none)</option>)];\n        for(let system of this.props.systems.systems) {\n            options.push(<option\n                value={system.id} key={\"sys_\"+system.id}\n            >{system.getStringName()}</option>)\n        }\n\n        let selected_value = \"none\";\n        let system_to_display = (<span className=\"hex-container\"></span>);\n        if(this.props.active_system!==null) {\n            selected_value = this.props.active_system.id;\n            system_to_display = (\n                <SystemComponent\n                    system={this.props.active_system}\n                    format={this.props.system_format}\n                    posStyle={{\"position\": \"relative\"}}\n                    onClick={()=>{}}\n                    hexSize={hexSize}\n                    draggable={true}\n                    onDrag={(event)=>this.props.onSelectedSystemDrag(event)}\n                    onDragEnd={(event)=>this.props.onSystemDragEnd(event)}\n                    onDrop={(event)=>this.props.onSystemDropped(event)}\n                    eval_variables={this.props.eval_variables}\n                />\n            );\n        }\n\n        return(\n                <div\n                    className=\"system-bank field\"\n                    onDragOver={(event)=>{event.preventDefault();}}\n                    onDrop={(event)=>this.props.onSystemDropped(event)}\n                >\n                    <label className=\"label\">\n                        System Bank\n                    </label>\n\t\t            <p className=\"control\">\n\t\t                <input\n\t\t                    id=\"include-base-systems\"\n\t\t                    type=\"checkbox\"\n\t\t                    checked={this.props.include_base_systems}\n\t\t                    onChange={(e)=>this.handleBaseCheckboxChange(e)}\n\t\t                />\n\t\t                <label htmlFor=\"include-base-systems\"> Base Systems</label>\n\t\t            </p>\n                    <p className=\"control\">\n                        <input\n                            id=\"include-pok-systems\"\n                            type=\"checkbox\"\n                            checked={this.props.include_pok_expansion_systems}\n                            onChange={(e)=>this.handlePoKExpansionCheckboxChange(e)}\n                        />\n                        <label htmlFor=\"include-pok-systems\"> Prophecy of Kings Systems</label>\n                    </p>\n                    <p className=\"control\">\n                        <input\n                            id=\"include-te-systems\"\n                            type=\"checkbox\"\n                            checked={this.props.include_te_expansion_systems}\n                            onChange={(e)=>this.handleTEExpansionCheckboxChange(e)}\n                        />\n                        <label htmlFor=\"include-te-systems\"> Thunder's Edge Systems</label>\n                    </p>\n                    <p className=\"control\">\n                        <span className=\"select is-small\">\n                            <select\n                                id=\"system-bank-select\"\n                                value={selected_value}\n                                onChange={()=>this.handleSelectChange()}\n                            >\n                                {options}\n                            </select>\n                        </span>\n                    </p>\n                    <p className=\"control\">\n                        <button\n                            disabled={this.props.active_system===null}\n                            onClick={()=>this.selectNoSystems()}\n                            className=\"button is-small\"\n                        >\n                            Select None\n                        </button>\n                    </p>\n                    <div className=\"control\">\n                        {system_to_display}\n                    </div>\n                </div>\n        );\n    }\n}\n\nexport class MapComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            \"system_format\": this.props.system_format,\n            \"hexSize\": getHexSizeFromScreen(),\n        };\n        this.system_box = this.props.system_box;\n    }\n\n    updateDimensions() {\n        this.setState(Object.assign({}, this.state, {\"hexSize\": getHexSizeFromScreen()}));\n    }\n\n    componentDidMount() {\n        this.updateDimensions();\n        window.addEventListener(\"resize\", this.updateDimensions.bind(this));\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.updateDimensions.bind(this));\n    }\n\n\n    render() {\n\t\tlet home_stats = this.props.map.getHomeSystemStats();\n        let hexSize = this.state.hexSize;\n        let cw = 5.5;\n        let ch = 7;\n        if(this.props.map.spaces.length>37) {\n            cw = 7;\n            ch = 9;\n        }\n        let mapHeight = hexSize*.866*ch + hexSpace*6;\n        let mapWidth = hexSize*cw + hexSpace*6;\n        let mapCenterH = mapWidth/2;\n        let mapCenterV = mapHeight/2;\n        let display=[];\n        for(let [index, space] of this.props.map.spaces.entries()) {\n            let is_draggable=false;\n            if(space.type===MAP_SPACE_TYPES.SYSTEM && this.props.systems_draggable) {\n                if(!space.system.isMecatolRexSystem()) is_draggable=true;\n            }\n            let home_value = null;\n\t\t\tlet these_stats = null;\n            if(\n                space.type===MAP_SPACE_TYPES.HOME\n                &&\n                this.props.home_values !== null\n                &&\n                (this.props.home_values && index.toString() in this.props.home_values)\n            ) {\n                home_value = this.props.home_values[index.toString()];\n            }\n\t\t\tif(space.type===MAP_SPACE_TYPES.HOME) {\n\t\t\t\tlet stat_container = getObjFromCoord(space, home_stats);\n\t\t\t\tif(stat_container) these_stats = stat_container.stats;\n\t\t\t}\n            display.push(\n                <MapSpaceComponent\n                    space={space}\n                    key={\"map_space_\"+index}\n                    system_format={this.props.system_format}\n                    onClick={()=>this.props.clickedSpace(index)}\n                    hexSize={hexSize}\n                    mapCenterH={mapCenterH}\n                    mapCenterV={mapCenterV}\n                    draggable={is_draggable}\n                    onDrag={(event)=>this.props.onSystemDrag(event, space.system)}\n                    onDragEnd={(event)=>this.props.onSystemDragEnd(event)}\n                    onDrop={(event)=>{if(this.props.systems_draggable) this.props.onSystemDropped(event, index);}}\n                    eval_variables={this.props.eval_variables}\n                    home_value={home_value}\n\t\t\t\t\thome_stats={these_stats}\n                />\n            );\n        }\n\n        let mapStyle = {\n            \"width\": mapWidth+\"px\",\n            \"height\": mapHeight+\"px\",\n        };\n        return (\n            <div className={\"map \"+this.props.map_class} style={mapStyle}>\n                {display}\n            </div>\n        );\n    }\n}\n\nexport const MAP_SPACE_TYPES = {\n    \"OPEN\": 1,\n    \"HOME\": 2,\n    \"SYSTEM\": 3,\n    \"CLOSED\": 4,\n    \"WARP\": 5,\n};\n\nexport class HexComponent extends React.Component {\n    onDrop(event) {\n        if(this.props.onDrop) {\n            this.props.onDrop(event);\n        }\n    }\n\n    render() {\n        let hexSize = this.props.hexSize;\n        return(\n            <div\n                className=\"hex-container\"\n                style={this.props.posStyle}\n                draggable={this.props.draggable}\n                onDragStart={(event)=>this.props.onDrag(event)}\n                onDragEnd={(event)=>this.props.onDragEnd(event)}\n            >\n                <svg className=\"shape-container\">\n                    <polygon\n                        onClick={()=>this.props.onClick()}\n                        className={(this.props.outlined ? \"outlined \": \"\")+\"hexagon \"+this.props.hexClass}\n                        points={\n                            (hexSize)+\", \"+(hexSize*.433)+\" \"+\n                            (hexSize*.75)+\", \"+(hexSize*.866)+\" \"+\n                            (hexSize*.25)+\", \"+(hexSize*.866)+\" \"+\n                            \"0, \"+(hexSize*.433)+\" \"+\n                            (hexSize*.25)+\", 0 \"+\n                            (hexSize*.75)+\", 0\"\n                        }\n                    >\n                    </polygon>\n                    {this.props.svgElements}\n                </svg>\n                <div\n                    className={\"hex-content \"+this.props.hexClass}\n                    onClick={()=>this.props.onClick()}\n                    onDragOver={(event)=>{event.preventDefault();}}\n                    onDrop={(event)=>this.onDrop(event)}\n                >\n                    {this.props.children}\n                </div>\n            </div>\n\n        );\n    }\n}\n\nexport class MapSpaceComponent extends React.Component {\n    getPositionStyle() {\n        let hexSize = this.props.hexSize;\n        let mapCenterH = this.props.mapCenterH;\n        let mapCenterV = this.props.mapCenterV;\n        let spaceOffsetV = hexSize *.5*.866;\n        let spaceOffsetH = hexSize*.5;\n        let x = this.props.space.x;\n        let y = this.props.space.y;\n        let z = this.props.space.z;\n\n        let xhmod = x*hexSize*.75/2 + x*hexSpace*.5;\n        let xvmod = 0;\n        let yhmod = -y*hexSize*.75/2 - y*hexSpace*.5;\n        let yvmod = -y*(hexSize*.866/2) - y*(hexSpace/2);\n        let zhmod = -z*hexSize*.75/2 - z*hexSpace*.5;\n        let zvmod = z*(hexSize*.866/2) + z*(hexSpace/2);\n\n        let left = mapCenterH - spaceOffsetH + xhmod + yhmod + zhmod;\n        let top = mapCenterV - spaceOffsetV + xvmod + yvmod + zvmod;\n\n        return {\"left\": left+\"px\", \"top\": top+\"px\"};\n    }\n\n    render() {\n        let display = null;\n        let type = this.props.space.type;\n        let posStyle = this.getPositionStyle();\n        switch(type) {\n            case MAP_SPACE_TYPES.OPEN:\n                display = (\n                    <HexComponent\n                        onClick={()=>this.props.onClick()}\n                        posStyle={posStyle}\n                        hexSize={this.props.hexSize}\n                        hexClass=\"open\"\n                        onDrop={(event)=>this.props.onDrop(event)}\n                    >\n                        +\n                    </HexComponent>\n                );\n                break;\n            case MAP_SPACE_TYPES.HOME:\n                let home_text = null\n                if(this.props.home_value !== null) {\n                    home_text = (<div>{this.props.home_value}</div>);\n                }\n                display = (\n                    <HexComponent\n                        onClick={()=>this.props.onClick()}\n                        posStyle={posStyle}\n                        hexSize={this.props.hexSize}\n                        hexClass=\"home\"\n                    >\n                        {home_text}<div>{this.props.home_stats}</div>\n                    </HexComponent>\n                );\n                break;\n            case MAP_SPACE_TYPES.SYSTEM:\n                display = (\n                    <SystemComponent\n                        system={this.props.space.system}\n                        format={this.props.system_format}\n                        posStyle={posStyle}\n                        onClick={()=>this.props.onClick()}\n                        hexSize={this.props.hexSize}\n                        draggable={this.props.draggable}\n                        onDrag={(event)=>this.props.onDrag(event)}\n                        onDragEnd={(event)=>this.props.onDragEnd(event)}\n                        onDrop={(event)=>this.props.onDrop(event)}\n                        eval_variables={this.props.eval_variables}\n                    />\n                );\n                break;\n            case MAP_SPACE_TYPES.CLOSED:\n                display = (\n                    <HexComponent\n                        onClick={()=>this.props.onClick()}\n                        posStyle={posStyle}\n                        hexSize={this.props.hexSize}\n                        hexClass=\"closed\"\n                    >\n                    </HexComponent>\n                );\n                break;\n            case MAP_SPACE_TYPES.WARP:\n                display = (\n                    <WarpComponent\n                        posStyle={posStyle}\n                        onClick={()=>this.props.onClick()}\n                        warps={this.props.space.warp_spaces}\n                        hexSize={this.props.hexSize}\n                    />\n                );\n                break;\n            default:\n                break;\n        }\n        return display;\n    }\n}\n\nexport class WarpComponent extends React.Component {\n    get_endpoint_coords(coords, hexSize) {\n        switch(coords) {\n            case WARP_DIRECTIONS.NORTH:\n                return {\n                    \"x\": hexSize*.5,\n                    \"y\": 0,\n                };\n            case WARP_DIRECTIONS.NORTHEAST:\n                return {\n                    \"x\": hexSize*(7/8),\n                    \"y\": .866*hexSize*(1/4),\n                };\n            case WARP_DIRECTIONS.SOUTHEAST:\n                return {\n                    \"x\": hexSize*(7/8),\n                    \"y\": .866*hexSize*(3/4),\n                };\n            case WARP_DIRECTIONS.SOUTH:\n                return {\n                    \"x\": hexSize*.5,\n                    \"y\": hexSize*.866,\n                };\n            case WARP_DIRECTIONS.SOUTHWEST:\n                return {\n                    \"x\": hexSize*(1/8),\n                    \"y\": hexSize*.866*(3/4),\n                };\n            case WARP_DIRECTIONS.NORTHWEST:\n                return {\n                    \"x\": hexSize*(1/8),\n                    \"y\": hexSize*.866*(1/4),\n                };\n            default:\n                return {\n                    \"x\": 0,\n                    \"y\": 0,\n                };\n        }\n    }\n\n\n    render() {\n        let posStyle = this.props.posStyle;\n\n        let warp_lines = [];\n        let hexSize = this.props.hexSize;\n        for(let [index, one_warp] of warp_configs[this.props.warps].entries()) {\n            let start_coords = this.get_endpoint_coords(one_warp[0], hexSize);\n            let end_coords = this.get_endpoint_coords(one_warp[1], hexSize);\n            warp_lines.push(\n                <line className=\"warp-line\"\n                    x1={start_coords.x}\n                    y1={start_coords.y}\n                    x2={end_coords.x}\n                    y2={end_coords.y}\n                    onClick={()=>this.props.onClick()}\n                    key={\"warp_line_\"+index}\n                />\n            );\n        }\n\n        return(\n            <HexComponent\n                onClick={()=>this.props.onClick()}\n                posStyle={posStyle}\n                hexSize={this.props.hexSize}\n                hexClass={\"warp\"}\n                svgElements={warp_lines}\n            >\n            </HexComponent>\n        );\n    }\n}\n\nexport const SYSTEM_FORMATS = {\n    \"STREAMLINED\": 0,\n    \"STREAMLINED_WITH_NAME\": 1,\n    \"COLORBLIND_FRIENDLY\": 2,\n    \"COLORBLIND_FRIENDLY_WITH_NAME\": 3,\n    \"ID_ONLY\": 4,\n};\n\nexport class SystemComponent extends React.Component {\n\n    render() {\n        let system = this.props.system;\n        let format = this.props.format;\n        let posStyle = this.props.posStyle;\n        let display = null;\n        let id_div = (<div className=\"id\">{system.id}</div>);\n        let extras = [];\n        let value_div = null;\n        if(this.props.eval_variables && system.planets.length>0) {\n            value_div = (<div className=\"value\">={system.evaluate(this.props.eval_variables)}</div>);\n        }\n        if(system.wormhole !== null) {\n            switch(system.wormhole) {\n                case WORMHOLES.ALPHA:\n                    extras.push(<div className=\"wormhole alpha\" key=\"alpha_wh\">a</div>);\n                    break;\n                case WORMHOLES.BETA:\n                    extras.push(<div className=\"wormhole beta\" key=\"alpha_wh\">b</div>);\n                    break;\n                default: break;\n            }\n        }\n        if(system.anomalies !== null) {\n            let anomalyClasses = \"\"\n            for(const anomaly of system.anomalies) {\n                switch(anomaly) {\n                    case ANOMALIES.SUPERNOVA:\n                        anomalyClasses += \"supernova \"\n                        break;\n                    case ANOMALIES.GRAVITY_RIFT:\n                        anomalyClasses += \"gravity-rift \"\n                        break;\n                    case ANOMALIES.NEBULA:\n                        anomalyClasses += \"nebula \"\n                        break;\n                    case ANOMALIES.ASTEROID_FIELD:\n                        anomalyClasses += \"asteroid-field \"\n                        break;\n                    case ANOMALIES.ENTROPIC_SCAR:\n                        anomalyClasses += \"entropic-scar \"\n                        break;\n                    default:\n                        break;\n                }\n            }\n            extras.push(\n            <div className={anomalyClasses} key={anomalyClasses}>\n                { anomalyClasses.includes('asteroid-field') && (\n                <>\n                    <div className=\"asteroid a\"></div>\n                    <div className=\"asteroid b\"></div>\n                    <div className=\"asteroid c\"></div>\n                    <div className=\"asteroid d\"></div>\n                    <div className=\"asteroid e\"></div>\n                </>\n                )}\n            </div>);\n        }\n        let rex_class = \"\";\n        if(system.isMecatolRexSystem()) rex_class = \"rex\";\n        let hex_props = {\n            onClick:()=>this.props.onClick(),\n            posStyle:posStyle,\n            hexSize:this.props.hexSize,\n            hexClass:rex_class,\n            draggable:this.props.draggable,\n            onDrag:(event)=>this.props.onDrag(event),\n            onDragEnd:(event)=>this.props.onDragEnd(event),\n            onDrop:(event)=>this.props.onDrop(event),\n\t\t\toutlined:system.isLegendary() || system.isMecatolRexSystem(),\n        };\n\n        switch(format) {\n            case SYSTEM_FORMATS.ID_ONLY:\n                display = (\n                    <HexComponent {...hex_props} >\n                        <span className=\"id-alone\">\n                            {system.id}\n                        </span>\n                    </HexComponent>\n                );\n                break;\n            case SYSTEM_FORMATS.STREAMLINED_WITH_NAME:\n                display = (\n                    <HexComponent {...hex_props} >\n                        {id_div}\n                        {value_div}\n                        {system.planets.map(function(planet, index) {\n                            return(\n                                <PlanetComponent\n                                    planet={planet}\n                                    key={planet.name}\n                                    format={PLANET_FORMATS.STREAMLINED_WITH_NAME}\n                                />\n                            )\n                        }, this)}\n                        {extras}\n                    </HexComponent>\n                );\n                break;\n            case SYSTEM_FORMATS.STREAMLINED:\n                display = (\n                    <HexComponent {...hex_props} >\n                        {id_div}\n                        {value_div}\n                        {system.planets.map(function(planet, index) {\n                            return(\n                                <PlanetComponent\n                                    planet={planet}\n                                    key={planet.name}\n                                    format={PLANET_FORMATS.STREAMLINED}\n                                />\n                            )\n                        }, this)}\n                        {extras}\n                    </HexComponent>\n                );\n                break;\n            case SYSTEM_FORMATS.COLORBLIND_FRIENDLY:\n                display = (\n                    <HexComponent {...hex_props} >\n                        {id_div}\n                        {value_div}\n                        {system.planets.map(function(planet, index) {\n                            return(\n                                <PlanetComponent\n                                    planet={planet}\n                                    key={planet.name}\n                                    format={PLANET_FORMATS.COLORBLIND_FRIENDLY}\n                                />\n                            )\n                        }, this)}\n                    </HexComponent>\n                );\n                break;\n            case SYSTEM_FORMATS.COLORBLIND_FRIENDLY_WITH_NAME:\n                display = (\n                    <HexComponent {...hex_props} >\n                        {id_div}\n                        {value_div}\n                        {system.planets.map(function(planet, index) {\n                            return(\n                                <PlanetComponent\n                                    planet={planet}\n                                    key={planet.name}\n                                    format={PLANET_FORMATS.COLORBLIND_FRIENDLY_WITH_NAME}\n                                />\n                            )\n                        }, this)}\n                    </HexComponent>\n                );\n                break;\n            default:\n                break;\n        }\n        return display;\n    }\n}\n\nexport const PLANET_FORMATS = {\n    \"STREAMLINED\": 0,\n    \"STREAMLINED_WITH_NAME\": 1,\n    \"COLORBLIND_FRIENDLY\": 2,\n    \"COLORBLIND_FRIENDLY_WITH_NAME\": 3,\n};\n\nexport class PlanetComponent extends React.Component {\n\n    render() {\n        let planet = this.props.planet;\n        let format = this.props.format;\n        let trait_class = \"\";\n        let trait_abbr = \"\";\n        if (planet.traits !== null) {\n            for (const trait of planet.traits) {\n                switch(trait) {\n                    case PLANET_TRAITS.INDUSTRIAL:\n                        trait_class += \"industrial \";\n                        trait_abbr += \"I \";\n                        break;\n                    case PLANET_TRAITS.HAZARDOUS:\n                        trait_class += \"hazardous \";\n                        trait_abbr += \"H \";\n                        break;\n                    case PLANET_TRAITS.CULTURAL:\n                        trait_class += \"cultural \";\n                        trait_abbr += \"C \";\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n        let tech_class = \"\";\n        let tech_abbr = \"\";\n        if(planet.tech_specialties) {\n            let scount = planet.tech_specialties.length;\n            for (const [x, tech_specialty] of planet.tech_specialties.entries()) {\n                let sffx = scount>1 && x<scount-1 ? \"-\" : \" \";\n                switch(tech_specialty) {\n                    case TECH_SPECIALTIES.CYBERNETIC:\n                        tech_class += \"cybernetic\"+sffx;\n                        tech_abbr += \"Y \";\n                        break;\n                    case TECH_SPECIALTIES.PROPULSION:\n                        tech_class += \"propulsion\"+sffx;\n                        tech_abbr += \"B \";\n                        break;\n                    case TECH_SPECIALTIES.BIOTIC:\n                        tech_class += \"biotic\"+sffx;\n                        tech_abbr += \"G \";\n                        break;\n                    case TECH_SPECIALTIES.WARFARE:\n                        tech_class += \"warfare\"+sffx;\n                        tech_abbr += \"R \";\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n\t\tlet legendary_class = \"\";\n\t\tif([\"Primor\", \"Hope's End\", \"Faunus\", \"Garbozia\", \"Emelpar\", \"Tempesta\", \"Industrex\"].includes(planet.name)) {\n\t\t\tlegendary_class = \" legendary\";\n\t\t}\n\t\tlet space_station_class = \"\";\n\t\tif([\"Tsion Station\", \"Oluz Station\", \"The Watchtower\"].includes(planet.name)) {\n\t\t\tspace_station_class = \" space-station\";\n\t\t}\n        let name_stuff = null;\n        if(\n            format===PLANET_FORMATS.STREAMLINED_WITH_NAME\n            || format===PLANET_FORMATS.COLORBLIND_FRIENDLY_WITH_NAME\n        ) {\n            name_stuff=(<span className=\"name\">{ planet.name }</span>);\n        }\n        let values = (\n            <div className=\"value_container\">\n                <span className=\"resources\">{ planet.resources }</span>\n                <span className=\"influence\">{ planet.influence }</span>\n            </div>);\n        if(\n            format===PLANET_FORMATS.COLORBLIND_FRIENDLY_WITH_NAME\n            || format===PLANET_FORMATS.COLORBLIND_FRIENDLY\n        ) {\n            values = (\n                <div className=\"value_container\">\n                    <span className={\"tech \"+tech_class}>{tech_abbr}</span>\n                    <span className=\"resources\">{ planet.resources }</span>\n                    <span className=\"influence\">{ planet.influence }</span>\n                    <span className={\"trait \"+trait_class}>{trait_abbr}</span>\n                </div>\n            )\n        }\n        return (\n            <div className={\"planet \"+trait_class+\" \"+tech_class+legendary_class+space_station_class}>\n                {values}\n                {name_stuff}\n            </div>\n        );\n    }\n}\n","import {MAP_SPACE_TYPES} from \"./map-components\";\nimport {warp_configs} from \"./data/warp_data\";\nimport {ANOMALIES, PLANET_TRAITS, TECH_SPECIALTIES, WORMHOLES} from \"./data/tile_data\";\n\nexport const PLANET_EVAL_STRATEGIES = {\n    \"SUM\": 1,\n    \"GREATEST\": 2,\n    \"GREATEST_PLUS_TECH\": 3,\n};\n\nexport class Planet {\n    constructor(obj_data) {\n        this.traits = obj_data.traits;\n        this.tech_specialties = obj_data.tech_specialties;\n        this.resources = obj_data.resources;\n        this.influence = obj_data.influence;\n        this.name = obj_data.name;\n    }\n\n    evaluate(variables) {\n        let v = variables.data;\n        let value = v.BASE_PLANET_MOD;\n        let r = this.resources*v.RESOURCES_MULTIPLIER,\n            i = this.influence*v.INFLUENCE_MULTIPLIER;\n        let t = 0;\n        if(this.tech_specialties!==null) {\n            t+=v.TECH_MOD;\n            if (this.tech_specialties !== null) {\n                for (const tech_specialty of this.tech_specialties) {\n                    switch(tech_specialty) {\n                        case TECH_SPECIALTIES.WARFARE:\n                            t+=v.TECH_WARFARE_MOD;\n                            break;\n                        case TECH_SPECIALTIES.PROPULSION:\n                            t+=v.TECH_PROPULSION_MOD;\n                            break;\n                        case TECH_SPECIALTIES.BIOTIC:\n                            t+=v.TECH_BIOTIC_MOD;\n                            break;\n                        case TECH_SPECIALTIES.CYBERNETIC:\n                            t+=v.TECH_CYBERNETIC_MOD;\n                            break;\n                        default:\n                            break;\n                    }\n                }\n            }\n        }\n        switch(v.PLANET_STRATEGY) {\n            case PLANET_EVAL_STRATEGIES.GREATEST:\n            case \"2\":\n                let to_add = r;\n                if(i>to_add) to_add = i;\n                if(t>to_add) to_add = t;\n                value += to_add;\n                break;\n            case PLANET_EVAL_STRATEGIES.GREATEST_PLUS_TECH:\n            case \"3\":\n                let to_add_t = r;\n                if(i>to_add_t) to_add_t = i;\n                to_add_t += t;\n                value += to_add_t;\n                break;\n            case PLANET_EVAL_STRATEGIES.SUM:\n            case \"1\":\n                value += r+i+t;\n                break;\n            default:\n                let high_one = r;\n                if(i>high_one) high_one = i;\n                value += high_one+t;\n                break;\n        }\n        if(r>0) value+= v.NONZERO_RESOURCES_MOD;\n        if(i>0) value+= v.NONZERO_INFLUENCE_MOD;\n        if (this.traits !== null) {\n            for (const trait of this.traits) {\n                switch(trait) {\n                    case PLANET_TRAITS.CULTURAL:\n                        value+=v.TRAIT_CULTURAL_MOD;\n                        break;\n                    case PLANET_TRAITS.HAZARDOUS:\n                        value+=v.TRAIT_HAZARDOUS_MOD;\n                        break;\n                    case PLANET_TRAITS.INDUSTRIAL:\n                        value+=v.TRAIT_INDUSTRIAL_MOD;\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n        return value;\n    }\n}\n\nexport class PlanetBox {\n    constructor(planet_data) {\n        this.planets = [];\n        for(let one_planet_data of planet_data) {\n            this.planets.push(new Planet(one_planet_data));\n        }\n    }\n\n    getPlanetByName(name) {\n        for(let one_planet of this.planets) {\n            if (one_planet.name === name) {\n                return one_planet;\n            }\n        }\n        return null;\n    }\n}\n\nexport class System {\n    constructor(obj_data, planet_box) {\n        this.id = obj_data.id;\n        this.anomalies = obj_data.anomalies;\n        this.wormhole = obj_data.wormhole;\n        this.planets = [];\n        for(let planet_name of obj_data.planets) {\n            let plToAdd = planet_box.getPlanetByName(planet_name);\n            if(plToAdd) this.planets.push(plToAdd);\n        }\n    }\n\n    evaluate(variables) {\n        let v = variables.data;\n        let value=0;\n        for(let one_planet of this.planets) {\n            value+=one_planet.evaluate(variables);\n        }\n        if(this.planets.length===1) {\n            value+=v.SINGLE_PLANET_MOD;\n        } else if(this.planets.length===2) {\n            value+=v.MULTI_PLANET_MOD;\n            if(this.planets[0].traits && this.planets[1].traits && this.planets[0].traits.some(trait => this.planets[1].traits.includes(trait))) {\n                value+=v.MATCHING_PLANETS_MOD;\n            } else {\n                value+=v.NONMATCHING_PLANETS_MOD;\n            }\n        } else if(this.planets.length>2) {\n            value+=2*v.MULTI_PLANET_MOD;\n            value+=v.MATCHING_PLANETS_MOD;\n        }\n        if(this.isMecatolRexSystem()) {\n            value+=v.MECATOL_REX_SYS_MOD;\n        }\n        if(this.isLegendary()) {\n            let legendary_mod = v.LEGENDARY_PLANET_SYS_MOD || 0;\n            value+=legendary_mod;\n        }\n        if(this.isSpaceStation()) {\n            let space_station_mod = v.SPACE_STATION_SYS_MOD || 0;\n            value+=space_station_mod;\n        }\n        return value;\n    }\n\t\n\tisLegendary() {\n\t\treturn [18, 65, 66, 97, 98, 99, 100, 115].includes(this.id);\n\t}\n    isSpaceStation() {\n        return [109, 111, 117].includes(this.id)\n    }\n\n    getDistanceModifier(variables = {}, through_wh=false) {\n        let v = variables.data;\n        let value = v.DISTANCE_MOD_BASE;\n        if(this.isBlue() || this.isMecatolRexSystem()) {\n            if(v.DISTANCE_MOD_PLANET===false) return false;\n            value+=v.DISTANCE_MOD_PLANET;\n            if(this.wormhole!==null && through_wh) {\n                if(v.DISTANCE_MOD_PLANET_WORMHOLE===false) return false;\n                value+=v.DISTANCE_MOD_PLANET_WORMHOLE;\n            }\n        } else if(this.anomalies===null) {\n            if(this.wormhole!==null && through_wh) {\n                if(v.DISTANCE_MOD_EMPTY_WORMHOLE===false) return false;\n                value+=v.DISTANCE_MOD_EMPTY_WORMHOLE;\n            } else {\n                if(v.DISTANCE_MOD_EMPTY===false) return false;\n                value+=v.DISTANCE_MOD_EMPTY;\n            }\n        }\n        if (this.anomalies !== null) {\n            for (const anomaly of this.anomalies) {\n                switch(anomaly) {\n                    case ANOMALIES.ASTEROID_FIELD:\n                        if(v.DISTANCE_MOD_ASTEROID_FIELD===false) return false;\n                        value+=v.DISTANCE_MOD_ASTEROID_FIELD;\n                        break;\n                    case ANOMALIES.GRAVITY_RIFT:\n                        if(v.DISTANCE_MOD_GRAVITY_RIFT===false) return false;\n                        value+=v.DISTANCE_MOD_GRAVITY_RIFT;\n                        break;\n                    case ANOMALIES.NEBULA:\n                        if(v.DISTANCE_MOD_NEBULA===false) return false;\n                        value+=v.DISTANCE_MOD_NEBULA;\n                        break;\n                    case ANOMALIES.SUPERNOVA:\n                        if(v.DISTANCE_MOD_SUPERNOVA===false) return false;\n                        value+=v.DISTANCE_MOD_SUPERNOVA;\n                        break;\n                    case ANOMALIES.ENTROPIC_SCAR:\n                        if(v.DISTANCE_MOD_ENTROPIC_SCAR===false) return false;\n                        value+=v.DISTANCE_MOD_ENTROPIC_SCAR;\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n        return value;\n    }\n\n    isMecatolRexSystem() {\n        for(let planet of this.planets) {\n            if (planet.name === \"Mecatol Rex\") return true;\n        }\n        return false;\n    }\n\n    isRed() {\n        if(this.planets.length<1 || this.anomalies !== null) return true;\n        return false;\n    }\n\n    isBlue() {\n        return !this.isRed() && !this.isMecatolRexSystem();\n    }\n\n    getStringName() {\n        let system = this;\n        let name_array = [];\n        for(let planet of system.planets) {\n\t\t\tlet tech = \"\";\n            if (planet.tech_specialties !== null) {\n                for (const tech_specialty of planet.tech_specialties) {\n                    switch(tech_specialty) {\n                        case TECH_SPECIALTIES.BIOTIC:\n                            tech += \"/G\";\n                            break;\n                        case TECH_SPECIALTIES.WARFARE:\n                            tech += \"/R\";\n                            break;\n                        case TECH_SPECIALTIES.CYBERNETIC:\n                            tech += \"/Y\";\n                            break;\n                        case TECH_SPECIALTIES.PROPULSION:\n                            tech += \"/B\";\n                            break;\n                        default:\n                            break;\n                    }\n                }\n            }\n            name_array.push(\n\t\t\t\tplanet.name+\" (\"+planet.resources+\"/\"+planet.influence+tech+\")\"\n\t\t\t);\n        }\n        if(system.wormhole !== null) {\n            switch(system.wormhole) {\n                case WORMHOLES.ALPHA:\n                    name_array.push(\"(a)\");\n                    break;\n                case WORMHOLES.BETA:\n                    name_array.push(\"(b)\");\n                    break;\n                default: break;\n            }\n        }\n        if(system.anomalies !== null) {\n            if (system.anomalies !== null) {\n                for (const anomaly of system.anomalies) {\n                    switch(anomaly) {\n                        case ANOMALIES.SUPERNOVA:\n                            name_array.push(\"Supernova\");\n                            break;\n                        case ANOMALIES.GRAVITY_RIFT:\n                            name_array.push(\"Gravity Rift\");\n                            break;\n                        case ANOMALIES.NEBULA:\n                            name_array.push(\"Nebula\");\n                            break;\n                        case ANOMALIES.ASTEROID_FIELD:\n                            name_array.push(\"Asteroid Field\");\n                            break;\n                        case ANOMALIES.ENTROPIC_SCAR:\n                            name_array.push(\"Entropic Scar\");\n                            break;\n                        default:\n                            break;\n                    }\n                }\n            }\n        }\n        if(name_array.length===0) name_array.push(\"Empty Space\");\n        return system.id+\": \"+name_array.join(\", \");\n    }\n}\n\nexport class SystemBox {\n    constructor(system_data, planet_box) {\n        this.systems = [];\n        this.planet_box = planet_box;\n        for(let one_system_data of system_data) {\n            this.systems.push(new System(one_system_data, planet_box));\n        }\n    }\n\n    getBlueSystemTotal() {\n        let total = 0;\n        for(let system of this.systems) {\n            if(system.isBlue()) {\n                total++;\n            }\n        }\n        return total;\n    }\n\n    getRedSystemTotal() {\n        let total = 0;\n        for(let system of this.systems) {\n            if(system.isRed()) {\n                total++;\n            }\n        }\n        return total;\n    }\n\n    getSystemIndexByID(id) {\n        for(let [index, system] of this.systems.entries()) {\n            if(system.id === id) return index;\n        }\n        return null;\n    }\n\n    getSystemByID(id, splice=false) {\n        let sysindex = this.getSystemIndexByID(id);\n        if (sysindex!==null && splice) return this.systems.splice(sysindex, 1);\n        if (sysindex!==null) return this.systems[sysindex];\n        return null;\n    }\n\n    makeCopy() {\n        let new_system_box = new SystemBox([], this.planet_box);\n        for(let one_system of this.systems) {\n            new_system_box.systems.push(one_system);\n        }\n        return new_system_box;\n    }\n\n    getWormholeSystems(type=null) {\n        let systems_to_return = [];\n        for(let one_sys of this.systems) {\n            if(\n                one_sys.wormhole!==null\n                &&\n                (\n                    type===null\n                    ||\n                    one_sys.wormhole===type\n                )\n            ) {\n                systems_to_return.push(one_sys);\n            }\n        }\n        return systems_to_return;\n    }\n}\n\nexport function getDistanceMultiplier(modded_distance, variables) {\n    let v = variables.data;\n    let d = modded_distance;\n    if(d<0) d = 0;\n    if(d>10) d = 10;\n    return v.DISTANCE_MULTIPLIER[d];\n}\n\nexport class Map {\n    constructor(load_default=true, starting_space=null, iterations=3) {\n        if(load_default) {\n            this.spaces = [starting_space];\n            for(let i=0; i<iterations; i++) {\n                this.addAdjacentSpaces();\n            }\n        } else {\n            this.spaces = [];\n        }\n    }\n\n    makeCopy() {\n        let new_map = new Map(false);\n        for(let one_space of this.spaces) {\n            let new_space = new MapSpace(\n                one_space.x,\n                one_space.y,\n                one_space.z,\n                one_space.warp_spaces,\n                one_space.type,\n                one_space.system,\n            );\n            new_map.spaces.push(new_space);\n        }\n        return new_map;\n    }\n\n    containsSystem(system_id) {\n        return (this.getSpaceBySystemID(system_id) !== null);\n    }\n\n    getSpaceBySystemID(id) {\n        for(let one_space of this.spaces) {\n            if(\n                one_space.system!==null\n                && one_space.system.id===id\n            ) return one_space;\n        }\n        return null;\n    }\n\t\n\tfindSpaceDistance(space_a, space_b, max=5) {\n\t\tlet checked_spaces = [space_a];\n\t\tlet new_to_check_adj = [space_a];\n\t\tfor(let i=0; i<=max; i++) {\n\t\t\tif(areCoordsInList(space_b, checked_spaces)) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t\tlet new_new_check = [];\n\t\t\tfor(let one_space of new_to_check_adj) {\n\t\t\t\tlet new_adj = this.getAdjacentSpacesIncludingWormholes(one_space);\n\t\t\t\tfor(let one_adj of new_adj) {\n\t\t\t\t\tif(!areCoordsInList(one_adj, checked_spaces)) {\n\t\t\t\t\t\tchecked_spaces.push(one_adj);\n\t\t\t\t\t\tnew_new_check.push(one_adj);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tnew_to_check_adj = new_new_check;\n\t\t}\n\t\treturn max+1;\n\t}\n\t\n\tgetHomeSystemStats() {\n\t\tlet stats = [];\n\t\tlet nonhomes = [];\n\t\tfor(let space of this.spaces) {\n\t\t\tif(space.type===MAP_SPACE_TYPES.HOME) {\n\t\t\t\tstats.push({home: space, slice: []});\n\t\t\t} else if(space.type===MAP_SPACE_TYPES.SYSTEM && space.system.planets.length>0) {\n\t\t\t\tnonhomes.push(space)\n\t\t\t}\n\t\t}\n\t\tfor(let space of nonhomes) {\n\t\t\tlet best = 50;\n\t\t\tlet winner = null;\n\t\t\tfor(let i=0;i<stats.length;i++) {\n\t\t\t\tlet dis = this.findSpaceDistance(stats[i].home, space);\n\t\t\t\tif(dis < best) {\n\t\t\t\t\tbest = dis;\n\t\t\t\t\twinner = i;\n\t\t\t\t} else if(dis===best) {\n\t\t\t\t\twinner = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(winner !== null) {\n\t\t\t\tstats[winner].slice.push(space);\n\t\t\t}\n\t\t}\n\t\tlet final_stats = [];\n\t\tfor(let one_stat of stats) {\n\t\t\tlet resources = 0;\n\t\t\tlet influence = 0;\n\t\t\tlet techs = \"\";\n\t\t\tfor(let one_system of one_stat.slice) {\n\t\t\t\tfor(let one_planet of one_system.system.planets) {\n\t\t\t\t\tresources += one_planet.resources;\n\t\t\t\t\tinfluence += one_planet.influence;\n                    if (one_planet.tech_specialties !== null) {\n                        for (const tech_specialty of one_planet.tech_specialties) {\n                            switch(tech_specialty) {\n                                case TECH_SPECIALTIES.WARFARE:\n                                    techs += \"R\";\n                                    break;\n                                case TECH_SPECIALTIES.PROPULSION:\n                                    techs += \"B\";\n                                    break;\n                                case TECH_SPECIALTIES.BIOTIC:\n                                    techs += \"G\";\n                                    break;\n                                case TECH_SPECIALTIES.CYBERNETIC:\n                                    techs += \"Y\";\n                                    break;\n                                default:\n                                    break;\n                            }\n                        }\n                    }\n\t\t\t\t}\n\t\t\t}\n\t\t\ttechs = techs.split(\"\").sort().join(\"\");\n\t\t\tfinal_stats.push({\n\t\t\t\tx: one_stat.home.x, \n\t\t\t\ty: one_stat.home.y,\n\t\t\t\tz: one_stat.home.z,\n\t\t\t\tstats: resources+\"/\"+influence+\" \"+techs,\n\t\t\t});\n\t\t}\n\t\treturn final_stats;\n\t}\n\n    getOpenSpacesTotal() {\n        let total = 0;\n        for(let space of this.spaces) {\n            if(space.type===MAP_SPACE_TYPES.OPEN) {\n                total++;\n            }\n        }\n        return total;\n    }\n\n    getBlueSystemTotal() {\n        let total = 0;\n        for(let space of this.spaces) {\n            if(space.type===MAP_SPACE_TYPES.SYSTEM && space.system.isBlue()) {\n                total++;\n            }\n        }\n        return total;\n    }\n\n    getRedSystemTotal() {\n        let total = 0;\n        for(let space of this.spaces) {\n            if(space.type===MAP_SPACE_TYPES.SYSTEM && space.system.isRed()) {\n                total++;\n            }\n        }\n        return total;\n    }\n\t\n\tgetTotalResources() {\n\t\tlet total = 0;\n\t\tfor(let space of this.spaces) {\n\t\t\tif(space.type===MAP_SPACE_TYPES.SYSTEM) {\n\t\t\t\tfor(let planet of space.system.planets) {\n\t\t\t\t\ttotal += planet.resources;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn total;\n\t}\n\tgetTotalInfluence() {\n\t\tlet total = 0;\n\t\tfor(let space of this.spaces) {\n\t\t\tif(space.type===MAP_SPACE_TYPES.SYSTEM) {\n\t\t\t\tfor(let planet of space.system.planets) {\n\t\t\t\t\ttotal += planet.influence;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn total;\n\t}\n\tgetTotalTechSpecialties() {\n\t\tlet total = \"\";\n\t\tfor(let space of this.spaces) {\n\t\t\tif(space.type===MAP_SPACE_TYPES.SYSTEM) {\n\t\t\t\tfor(let planet of space.system.planets) {\n                    if (planet.tech_specialties !== null) {\n                        for (const tech_specialty of planet.tech_specialties) {\n                            switch(tech_specialty) {\n                                case TECH_SPECIALTIES.WARFARE:\n                                    total += \"R\";\n                                    break;\n                                case TECH_SPECIALTIES.PROPULSION:\n                                    total += \"B\";\n                                    break;\n                                case TECH_SPECIALTIES.BIOTIC:\n                                    total += \"G\";\n                                    break;\n                                case TECH_SPECIALTIES.CYBERNETIC:\n                                    total += \"Y\";\n                                    break;\n                                default:\n                                    break;\n                            }\n                        }\n                    }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn total.split('').sort().join('');\n\t}\n\t\n\tgetPlanetTraitTotals() {\n\t\tlet ind = 0;\n\t\tlet cul = 0;\n\t\tlet haz = 0;\n\t\tfor(let space of this.spaces) {\n\t\t\tif(space.type===MAP_SPACE_TYPES.SYSTEM) {\n\t\t\t\tfor(let planet of space.system.planets) {\n                    if (planet.traits !== null) {\n                        for(const trait of planet.traits) {\n                            switch(trait) {\n                            case PLANET_TRAITS.HAZARDOUS:\n                                haz++;\n                                break;\n                            case PLANET_TRAITS.CULTURAL:\n                                cul++;\n                                break;\n                            case PLANET_TRAITS.INDUSTRIAL:\n                                ind++;\n                                break;\n                            default:\n                                break;\n                            }\n                        }\n                    }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn haz+\"/\"+ind+\"/\"+cul;\n\t}\n\n    getPossibleSystemTotal() {\n        let total = 0;\n        for(let space of this.spaces) {\n            if(\n                space.type===MAP_SPACE_TYPES.SYSTEM\n                || space.type===MAP_SPACE_TYPES.OPEN\n            ) {\n                total++;\n            }\n        }\n        return total;\n    }\n\n   areWarpsLogical() {\n        for(let space of this.spaces) {\n            if (space.type === MAP_SPACE_TYPES.WARP) {\n                for(let one_warp of warp_configs[space.warp_spaces]) {\n                    for(let one_warp_dir of one_warp) {\n                        if(!this.doesWarpDirectionConnect(one_warp_dir, space, [space])) {\n                            return false;\n                        }\n                    }\n                }\n            }\n        }\n        return true;\n    }\n\n    doesWarpDirectionConnect(warp_direction, space, checked_spaces) {\n        let whereItGoes = space.getWarpDirectionCoordinates(warp_direction);\n        let spaceItGoes = getObjFromCoord(whereItGoes, this.spaces);\n        if(!spaceItGoes) return false;\n        if(areCoordsInList(spaceItGoes, checked_spaces)) return false;\n        if(spaceItGoes.type === MAP_SPACE_TYPES.CLOSED) return false;\n        if(spaceItGoes.type === MAP_SPACE_TYPES.WARP) {\n            let oppositeDirection = {\n                \"x\": warp_direction.x*-1,\n                \"y\": warp_direction.y*-1,\n                \"z\": warp_direction.z*-1,\n            };\n            let directions_to_check = [];\n            for(let one_next_warp of warp_configs[spaceItGoes.warp_spaces]) {\n                if(areCoordsInList(oppositeDirection, [one_next_warp[0]])) {\n                    directions_to_check.push(one_next_warp[1]);\n                } else if(areCoordsInList(oppositeDirection, [one_next_warp[1]])) {\n                    directions_to_check.push(one_next_warp[0]);\n                }\n            }\n            if(directions_to_check.length === 0) return false;\n            checked_spaces.push(spaceItGoes);\n            for(let one_direction of directions_to_check) {\n                if(!this.doesWarpDirectionConnect(one_direction, spaceItGoes, checked_spaces)) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    isComplete() {\n        for(let map_space of this.spaces) {\n            if(map_space.type===MAP_SPACE_TYPES.OPEN) {\n                return false;\n            }\n        }\n        return true;\n    }\n\t\n\tgetTotalOpen() {\n\t\treturn this.spaces.filter(space=>space.type===MAP_SPACE_TYPES.OPEN).length\n\t}\n\n    isLegal() {\n        let is_legal = true;\n        for(let map_space of this.spaces) {\n            if(map_space.type===MAP_SPACE_TYPES.SYSTEM && map_space.system.wormhole !== null) {\n                for(let one_sys of this.getAdjacentSystems(map_space)) {\n                    if(one_sys.type===MAP_SPACE_TYPES.SYSTEM && one_sys.system.wormhole===map_space.system.wormhole) {\n                        is_legal = false;\n                        break;\n                    }\n                }\n            }\n            if(map_space.type===MAP_SPACE_TYPES.SYSTEM && map_space.system.anomalies !== null) {\n                for(let one_sys of this.getAdjacentSystems(map_space)) {\n                    if(one_sys.type===MAP_SPACE_TYPES.SYSTEM && one_sys.system.anomalies!==null) {\n                        is_legal = false;\n                        break;\n                    }\n                }\n            }\n            if(!is_legal) break;\n        }\n        return is_legal;\n    }\n\n    getHomeValue(space, variables) {\n        let home_total = 0;\n        for(let one_space of this.spaces) {\n            if(\n                one_space.type===MAP_SPACE_TYPES.SYSTEM &&\n                getCoordsDistance(space, one_space) < 5\n\t\t\t\t\n            ) {\n                let evaluation = one_space.system.evaluate(variables)\n                if (evaluation > 0) {\n                    let shortest_distance = this._getShortestModdedDistance(\n                        space, one_space, variables\n                    );\n                    if(shortest_distance!==null) {\n                        home_total+=getDistanceMultiplier(\n                            shortest_distance, variables\n                        )*evaluation;\n                    }\n                }\n            }\n        }\n        return home_total;\n    }\n\n    _getShortestModdedDistance(start_space, dest_space, variables) {\n        let finished_paths = [];\n        let act_paths = [];\n\n        let first_steps = this.getAdjacentSystemsIncludingWormholes(start_space);\n        for(let one_step of first_steps) {\n            if(\n                one_step.system.getDistanceModifier(variables)!==false\n                && this.getMapDistanceModifier(start_space, dest_space, variables)!==false\n            ) {\n                let new_path = [one_step.system.id];\n                if(one_step.system.id===dest_space.system.id) {\n                    finished_paths.push(new_path);\n                } else {\n                    act_paths.push(new_path);\n                }\n            }\n        }\n        while(act_paths.length>0) {\n            let new_active_paths = [];\n            for(let one_path of act_paths) {\n                let results = this._extendPath(start_space, dest_space, one_path, variables);\n                for(let one_done of results.finished) {\n                    finished_paths.push(one_done);\n                }\n                for(let one_ongoing of results.ongoing) {\n                    new_active_paths.push(one_ongoing);\n                }\n            }\n            act_paths=new_active_paths;\n        }\n        let first_yet = false;\n        let shortest = null;\n        for(let one_path of finished_paths) {\n            let path_length = this._calculateModdedDistanceFromRaw(one_path, variables, start_space);\n            if(!first_yet || path_length<shortest) {\n                shortest = path_length;\n                first_yet = true;\n            }\n        }\n        return shortest;\n    }\n\n    _extendPath(start_space, dest_space, path, variables) {\n        let completed_paths = [];\n        let ongoing_paths = [];\n        let last_step = this.getSpaceBySystemID(path[path.length-1]);\n        let next_steps = this.getAdjacentSystemsIncludingWormholes(last_step);\n        for(let one_step of next_steps) {\n            if(one_step.system.id===dest_space.system.id) {\n                let path_copy = [...path, one_step.system.id];\n                completed_paths.push(path_copy);\n            } else if (\n                !(one_step.system.id in path)\n                && one_step.system.getDistanceModifier(variables)!==false\n                && this.getMapDistanceModifier(start_space, dest_space, variables)!==false\n                && path.length<4\n            ) {\n                let path_copy = [...path, one_step.system.id];\n                ongoing_paths.push(path_copy);\n            }\n        }\n        return({\n            \"finished\": completed_paths,\n            \"ongoing\": ongoing_paths,\n        });\n    }\n\n\n    _calculateModdedDistanceFromRaw(path, variables, start_space) {\n        let modded_dist = 0;\n        for(let [x, one_index] of path.entries()) {\n            let one_sys = this.getSpaceBySystemID(one_index);\n            let wh = false;\n            if(x>0) {\n                if(!areCoordsInList(one_sys, this.getAdjacentSpaces(start_space))) {\n                    wh = true;\n                }\n            }\n            modded_dist+=\n                one_sys.system.getDistanceModifier(variables, wh)\n                +this.getMapDistanceModifier(start_space, one_sys, variables);\n        }\n        return modded_dist;\n    }\n\n    getMapDistanceModifier(start_space, dest_space, variables) {\n        let adj_spaces = this.getAdjacentSpacesIncludingWormholes(dest_space);\n        for(let one_space of adj_spaces) {\n            if(\n                one_space.type===MAP_SPACE_TYPES.HOME &&\n                !areCoordsInList(start_space, [one_space])\n            ) {\n                return variables.data.DISTANCE_MOD_ADJACENT_TO_OPPONENT;\n            }\n        }\n        return 0;\n    }\n\n\n\n    addAdjacentSpaces() {\n        let coords_to_add = [];\n        for(let map_space of this.spaces) {\n            let adjacent_coords = map_space.getAdjacentCoordinates();\n            for(let one_adjacent_coords of adjacent_coords) {\n                if(\n                    !areCoordsInList(one_adjacent_coords, coords_to_add) &&\n                    !areCoordsInList(one_adjacent_coords, this.spaces)\n                ) {\n                    coords_to_add.push(one_adjacent_coords);\n                }\n            }\n        }\n        for(let one_coords_to_add of coords_to_add) {\n            this.spaces.push(new MapSpace(\n                one_coords_to_add.x,\n                one_coords_to_add.y,\n                one_coords_to_add.z,\n            ));\n        }\n    }\n\n    _getAdjacentSpacesThroughWarps(system_space, warp_space) {\n        let adj_systems = [];\n        let direction_from = {\n            \"x\": system_space.x - warp_space.x,\n            \"y\": system_space.y - warp_space.y,\n            \"z\": system_space.z - warp_space.z,\n        };\n        let warps_to_follow = [];\n        for(let one_warp of warp_configs[warp_space.warp_spaces]) {\n            if(areCoordsInList(direction_from, one_warp)) {\n                warps_to_follow.push(one_warp);\n            }\n        }\n        for(let one_warp of warps_to_follow) {\n            for(let one_warp_direction of one_warp) {\n                if(!areCoordsInList(one_warp_direction, [direction_from])) {\n                    let next_space = getObjFromCoord(\n                        warp_space.getWarpDirectionCoordinates(one_warp_direction),\n                        this.spaces\n                    );\n                    if(next_space!==null) {\n                        if(next_space.type!==MAP_SPACE_TYPES.WARP) {\n                            if (!areCoordsInList(next_space, adj_systems)) {\n                                adj_systems.push(next_space);\n                            }\n                        } else {\n                            let farther_systems = this._getAdjacentSpacesThroughWarps(warp_space, next_space);\n                            for(let one_far_sys of farther_systems) {\n                                if(!areCoordsInList(one_far_sys, adj_systems)) {\n                                    adj_systems.push(one_far_sys);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return adj_systems;\n    }\n\n    getAdjacentSystems(space) {\n        let adj_spaces = this.getAdjacentSpaces(space);\n        let adj_systems = [];\n        for(let one_space of adj_spaces) {\n            if(one_space.type===MAP_SPACE_TYPES.SYSTEM){\n                adj_systems.push(one_space);\n            }\n        }\n        return adj_systems;\n    }\n\n    getAdjacentSpaces(space) {\n        let adj_coords = space.getAdjacentCoordinates();\n        let adj_systems = [];\n        for(let one_coord of adj_coords) {\n            let potential_space = getObjFromCoord(one_coord, this.spaces);\n            if(potential_space !== null) {\n                if(potential_space.type!==MAP_SPACE_TYPES.WARP){\n                    if(!areCoordsInList(potential_space, adj_systems)) {\n                        adj_systems.push(potential_space);\n                    }\n                } else {\n                    let potential_systems = this._getAdjacentSpacesThroughWarps(space, potential_space);\n                    for(let one_system_space of potential_systems) {\n                        if(!areCoordsInList(one_system_space, adj_systems)) {\n                            adj_systems.push(one_system_space);\n                        }\n                    }\n                }\n            }\n        }\n        return adj_systems;\n    }\n\n    getAdjacentSystemsIncludingWormholes(space) {\n        let adj_spaces = this.getAdjacentSpacesIncludingWormholes(space);\n        let adj_systems = [];\n        for(let one_space of adj_spaces) {\n            if(one_space.type===MAP_SPACE_TYPES.SYSTEM) {\n                adj_systems.push(one_space);\n            }\n        }\n        return adj_systems;\n    }\n\n    getAdjacentSpacesIncludingWormholes(space) {\n        let adj_systems = this.getAdjacentSpaces(space);\n        let wh_systems = this.getMatchingWormholeSpaces(space);\n        for(let one_whs of wh_systems) {\n            if(!areCoordsInList(one_whs, adj_systems)) {\n                adj_systems.push(one_whs);\n            }\n        }\n        return adj_systems;\n    }\n\n    getMatchingWormholeSpaces(space) {\n        let matching_spaces = [];\n        if(space.type===MAP_SPACE_TYPES.SYSTEM && space.system.wormhole!==null) {\n            for(let one_space of this.spaces) {\n                if(\n                    one_space.type===MAP_SPACE_TYPES.SYSTEM &&\n                    one_space.system.wormhole===space.system.wormhole &&\n                    one_space.system.id !== space.system.id\n                ) {\n                    matching_spaces.push(one_space);\n                }\n            }\n        }\n        return matching_spaces;\n    }\n\n}\n\nexport function getObjFromCoord(coords, list) {\n        for(let existing_coords of list) {\n        if(\n            coords.x === existing_coords.x &&\n            coords.y === existing_coords.y &&\n            coords.z === existing_coords.z\n        ) {\n            return existing_coords;\n        }\n    }\n    return null;\n}\n\nexport function getCoordsDistance(coords1, coords2) {\n\treturn Math.max(\n\t\tMath.abs(coords1.x-coords2.x),\n\t\tMath.abs(coords1.y-coords2.y),\n\t\tMath.abs(coords1.z-coords2.z),\n\t)\n}\n\nexport function areCoordsInList(coords, list) {\n    if(getObjFromCoord(coords, list)) {\n        return true;\n    }\n    return false;\n}\n\nexport class MapSpace {\n    constructor(x, y, z, warp_spaces=null, type=MAP_SPACE_TYPES.OPEN, system=null) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.warp_spaces = warp_spaces;\n        this.type = type;\n        this.system = system;\n    }\n\n    getAdjacentCoordinates() {\n        return [\n            {\"x\":this.x+1,\"y\":this.y-1,\"z\":this.z},\n            {\"x\":this.x+1,\"y\":this.y,\"z\":this.z-1},\n            {\"x\":this.x-1,\"y\":this.y+1,\"z\":this.z},\n            {\"x\":this.x,\"y\":this.y+1,\"z\":this.z-1},\n            {\"x\":this.x-1,\"y\":this.y,\"z\":this.z+1},\n            {\"x\":this.x,\"y\":this.y-1,\"z\":this.z+1},\n        ];        \n    }\n\n    getWarpDirectionCoordinates(warp_direction) {\n        return {\n            \"x\": this.x+warp_direction.x,\n            \"y\": this.y+warp_direction.y,\n            \"z\": this.z+warp_direction.z,\n        }\n    }\n}\n","import React from 'react';\n\nexport function download(filename, text) {\n  let element = document.createElement('a');\n  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n  element.setAttribute('download', filename);\n\n  element.style.display = 'none';\n  document.body.appendChild(element);\n\n  element.click();\n\n  document.body.removeChild(element);\n}\n\nexport function getSafeFileName(string) {\n    return string.replace(/[^a-z0-9]/gi, '_').toLowerCase();\n}\n\nexport class JSONDownloadButton extends React.Component {\n    downloadJSON() {\n        let downloadInfo = this.props.getDownloadInfo();\n        download(getSafeFileName(downloadInfo.filename)+\".json\", JSON.stringify(downloadInfo.data));\n    }\n\n    render() {\n        return(\n            <button onClick={()=>this.downloadJSON()} className={this.props.className}>\n                {this.props.title}\n            </button>\n        );\n    }\n}\n\nexport class JSONUploadButton extends React.Component {\n    handleUpload() {\n        let fr = new FileReader();\n        fr.readAsText(document.getElementById(this.props.id).files[0]);\n        fr.onload = function(oFREvent) {\n            this.props.handleJSON(JSON.parse(oFREvent.target.result));\n            document.getElementById(this.props.id)\n        }.bind(this);\n    }\n\n    render() {\n        return(\n            <span className=\"control\">\n                <span className=\"file is-small\">\n                    <label className=\"file-label\">\n                        <input\n                            type=\"file\"\n                            id={this.props.id}\n                            className=\"file-input\"\n                            onChange={()=>this.handleUpload()}\n                        />\n                        <span className=\"file-cta\">\n                            <span className=\"file-icon\">\n                                <i className=\"fas fa-upload\"></i>\n                            </span>\n                            <span className=\"file-label\">\n                                Choose a file...\n                            </span>\n                        </span>\n                    </label>\n                </span>\n            </span>\n        )\n    }\n}","import React from 'react';\nimport $ from 'jquery';\nimport ls from \"local-storage\";\n\nimport {\n    planet_data,\n    system_data,\n} from '../data/tile_data.js';\nimport default_layouts from '../data/default_layouts.json';\n\nimport {\n    Map,\n    MapSpace,\n    SystemBox,\n    PlanetBox,\n    System,\n} from \"../map-logic\";\n\nwindow.jQuery = $;\n\nexport class BaseEditor extends React.Component {\n    constructor(props) {\n        super(props);\n        this.planet_box = new PlanetBox(planet_data);\n        this.system_box = new SystemBox(system_data, this.planet_box);\n        this.default_layouts = default_layouts;\n\n        this.state = {\n            \"map\": null,\n            \"message\": \"\",\n            \"input_title\": \"\",\n            \"saved_data\": ls.get(this.props.storage_key) || [],\n            \"selected_item\": this.getNewStringValue(),\n        };\n    }\n\n    getMessageHtml() {\n        let message = null;\n        if(this.state.message !== null && this.state.message!==\"\") {\n            message = (\n                <div className=\"block content for-message\">\n                      <blockquote>{this.state.message}</blockquote>\n                    <div\n                        className=\"close-button\"\n                        onClick={()=>this.setNoMessage()}\n                    >\n                        <i className=\"fa fa-window-close fa-2x\"></i>\n                    </div>\n                </div>\n            );\n        }\n        return message;\n    }\n\n    setNoMessage() {\n        this.setState({\"message\": null});\n    }\n\n    componentWillUnmount() {\n        this.props.sendStateBeforeDeath(this.state);\n    }\n\n    setMap(new_map) {\n        this.setState({\"map\": new_map});\n    }\n\n    getLayoutFromJSON(data) {\n        let new_map = new Map(false);\n        for(let one_space_data of data) {\n            let space_system = null;\n            if(one_space_data.system!==null) {\n                space_system = new System(one_space_data.system, this.planet_box);\n            }\n            new_map.spaces.push(new MapSpace(\n                one_space_data.x,\n                one_space_data.y,\n                one_space_data.z,\n                one_space_data.warp_spaces,\n                one_space_data.type,\n                space_system,\n            ));\n        }\n        return new_map;\n    }\n\n    getJSONDataFromSpaces(spaces) {\n        let spaces_data = [];\n        for(let one_space of spaces) {\n            let space_data = Object.assign({}, one_space, {\"system\": null});\n            if(one_space.system !== null) {\n                let system_data = Object.assign({}, one_space.system, {\"planets\":[]});\n                for(let one_planet of one_space.system.planets) {\n                    system_data.planets.push(one_planet.name);\n                }\n                space_data.system = system_data;\n            }\n            spaces_data.push(space_data);\n        }\n        return spaces_data;\n    }\n\n    getCurrentLayoutJSON() {\n        let l_title = \"Untitled Layout\";\n        if($('#layout-title').val() !== '') {\n            l_title = $('#layout-title').val();\n        }\n        return {\n            \"title\": l_title,\n            \"data\": this.getJSONDataFromSpaces(this.state.map.spaces),\n        };\n    }\n\n    getCurrentLayoutJSONFileInfo() {\n        let data = this.getCurrentLayoutJSON();\n        this.setState({\"message\": \"\"});\n        return {\n            \"filename\": data.title,\n            \"data\": [data]\n        };\n    }\n\n    getAllLayoutJSONFileInfo() {\n        this.setState({\"message\": \"\"});\n        let data = ls.get(this.props.storage_key) || [];\n        return {\n            \"filename\": \"All \"+this.props.subject_plural,\n            \"data\": data\n        };\n    }\n\n    setLayout(data, selected_item=\"new\", new_map=null) {\n        if(new_map===null) new_map = this.getLayoutFromJSON(data.data);\n        let loadedTitle = data.title;\n        let new_message = this.props.subject+\" '\"+loadedTitle+\"' displayed.\";\n        this.setMap(new_map);\n        this.setState({\n            \"message\": new_message,\n            \"input_title\": loadedTitle,\n            \"selected_item\": selected_item.toString(),\n        });\n    }\n\n    addLayoutsFromJSON(data) {\n        if(data.length>0) {\n            let saved_data = Object.assign([], this.state.saved_data);\n            for(let dataToSave of data) {\n                saved_data.push(dataToSave);\n            }\n            ls.set(this.props.storage_key, saved_data);\n            this.setLayout(saved_data[saved_data.length-1], saved_data.length-1);\n            let new_map = this.getLayoutFromJSON(saved_data[saved_data.length-1].data);\n            this.setMap(new_map);\n            this.setState({\n                \"saved_data\": ls.get(this.props.storage_key) || [],\n                \"message\": \"Layouts loaded.\",\n                \"selected_item\": saved_data.length-1,\n                \"input_title\": saved_data[saved_data.length-1].title,\n            });\n        } else {\n            this.setState({\"message\": \"There were no \"+this.props.subject_plural+\" to load.\"})\n        }\n    }\n\n    getSelectValue() {\n        let int_select = document.getElementById(\"layout-select\");\n        return int_select.options[int_select.selectedIndex].value;\n    }\n\n    saveCurrent() {\n        let dataToSave = this.getCurrentLayoutJSON();\n        let currentIndex = this.getSelectValue();\n        let saved_data = Object.assign([], this.state.saved_data);\n        let new_selected = saved_data.length;\n        if(\n            currentIndex.split(\"_\")[0] === \"new\" ||\n            currentIndex.split(\"_\")[0] === \"newc\"\n        ) {\n            saved_data.push(dataToSave);\n        } else {\n            saved_data[parseInt(currentIndex)] = dataToSave;\n            new_selected = parseInt(currentIndex);\n        }\n        ls.set(this.props.storage_key, saved_data);\n        this.setState({\n            \"selected_item\": new_selected.toString(),\n            \"saved_data\": ls.get(this.props.storage_key) || [],\n            \"message\": this.props.subject+\" '\"+dataToSave.title+\"' saved.\",\n        });\n    }\n\n    deleteCurrent() {\n        let currentIndex = this.getSelectValue();\n        let saved_data = Object.assign([], this.state.saved_data);\n        let toDel = saved_data.splice(parseInt(currentIndex), 1)[0];\n        ls.set(this.props.storage_key, saved_data);\n        this.setMap(this.getNewLayout());\n        this.setState({\n            \"input_title\": \"\",\n            \"selected_item\": this.getNewStringValue(),\n            \"message\": this.props.subject+\" '\"+toDel.title+\"' deleted.\",\n            \"saved_data\": ls.get(this.props.storage_key) || [],\n        });\n    }\n\n    deleteAll() {\n        ls.remove(this.props.storage_key);\n        this.setMap(this.getNewLayout());\n        this.setState({\n            \"saved_data\": ls.get(this.props.storage_key) || [],\n            \"selected_item\": this.getNewStringValue(),\n            \"input_title\": \"\",\n            \"message\": \"All saved \"+this.props.subject_plural+\" have been deleted.\",\n            \"bank_systems\": this.syncBankSystems(this.getNewLayout()),\n        });\n    }\n}","export function compareByID(a, b) {\n    if(a.id > b.id) {\n        return 1;\n    } else if(a.id < b.id) {\n        return -1;\n    }\n    return 0;\n}\n\nexport function shuffle(a) {\n    for (let i = a.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [a[i], a[j]] = [a[j], a[i]];\n    }\n    return a;\n}\n\n","import React from 'react';\nimport $ from 'jquery';\nimport ls from \"local-storage\";\n\nimport {WORMHOLES} from \"../data/tile_data\";\nimport default_variables from '../data/default_evaluators.json';\nimport map_string_order from '../data/map_string_order.json';\n\nimport {getObjFromCoord, SystemBox} from \"../map-logic\";\nimport {\n    SYSTEM_FORMATS,\n    MapComponent,\n    MAP_SPACE_TYPES,\n    SystemBankComponent\n} from \"../map-components\";\nimport {\n    JSONDownloadButton,\n    JSONUploadButton,\n} from \"../download-helpers\";\nimport {BaseEditor} from \"./base-editor\";\nimport {\n    shuffle,\n    compareByID,\n} from \"../utilities\";\n\nwindow.jQuery = $;\nconst LOOPS_TO_TRY = 10000;\n\nexport class MapEditor extends BaseEditor {\n    constructor(props) {\n        super(props);\n        let starting_layout = this.getLayoutFromJSON(this.default_layouts[0].data);\n        this.state.map = starting_layout;\n        this.state.selected_bank_system = null;\n        this.state.system_format = SYSTEM_FORMATS.STREAMLINED_WITH_NAME;\n        this.state.draggedSystem = null;\n        this.state.option_pair_wormholes = true;\n        this.state.option_include_all_wormholes = true;\n        this.state.target_blue_total = \"random\";\n        this.state.bank_systems = this.syncBankSystems(starting_layout, true, true, true);\n        this.state.eval_option=\"default_0\";\n        this.state.eval_variables=default_variables[0];\n        this.state.home_values = {};\n        this.state.balance_difference = null;\n        this.state.map_string = \"\";\n        this.state.balance_options = {\n            \"dont_move_wormholes\": false,\n            \"dont_move_anomalies\": false,\n            \"dont_move_empty\": false,\n        };\n        this.state.include_pok_expansion_systems = true;\n        this.state.include_te_expansion_systems = true;\n\t\tthis.state.include_base_systems = true;\n        this.state.long_op = false;\n        if(this.props.state_to_import) {\n            let matching_options = this.getOptions().filter(option => option.index === this.props.state_to_import.selected_item);\n            let matching_evals = this.getEvalOptions().filter(option => option.index === this.props.state_to_import.eval_option);\n            if (matching_options.length > 0 && matching_evals.length > 0) {\n                this.state = this.props.state_to_import;\n            }\n        }\n    }\n\n    setMap(new_map, home_values=null, balance_difference=null, eval_var=null) {\n        if(new_map.isComplete()) {\n            if(home_values===null) {\n                if(eval_var===null) eval_var = this.state.eval_variables;\n                home_values = this.getHomeValues(new_map, eval_var);\n            }\n            if(balance_difference===null) {\n                balance_difference = this.getBalanceDifference(home_values);\n            }\n        } else {\n            home_values = {};\n            balance_difference = null;\n        }\n        this.setState({\n            \"map\": new_map,\n            \"bank_systems\": this.syncBankSystems(new_map),\n            \"home_values\": home_values,\n            \"balance_difference\": balance_difference,\n            \"map_string\": this.getMapString(new_map),\n        });\n    }\n\n    syncBankSystems(map, include_pok_expansion_systems=null, include_te_expansion_systems=null, include_base_systems=null) {\n        if(include_pok_expansion_systems===null) include_pok_expansion_systems = this.state.include_pok_expansion_systems;\n        if(include_te_expansion_systems===null) include_te_expansion_systems = this.state.include_te_expansion_systems;\n\t\tif(include_base_systems===null) include_base_systems = this.state.include_base_systems;\n        let bank_systems = new SystemBox([], []);\n        for(let system of this.system_box.systems) {\n            if(\n                (\n                    map===null\n                    || !map.containsSystem(system.id)\n                )\n                && (\n                    (system.id < 59 && include_base_systems) ||\n                    (system.id >= 59 && system.id <= 80 && include_pok_expansion_systems) ||\n                    (system.id > 80 && include_te_expansion_systems)\n                )\n            ) {\n                 bank_systems.systems.push(system);\n             }\n        }\n        bank_systems.systems.sort(compareByID);\n        return bank_systems;\n    }\n\n    setActiveBankSystem(system) {\n        this.setState({\"selected_bank_system\": system});\n    }\n\n    handleSelectChange() {\n        let new_value = this.getSelectValue();\n        let new_check = this.getSelectNewMapValue();\n        if(!(new_check === null)) {\n            if(this.getSelectNewMapType() === \"newc\") {\n                this.loadCustomLayout(new_check);\n            } else {\n                this.loadDefault(new_check);\n            }\n        } else {\n            let valIndex = parseInt(new_value);\n            this.setLayout(this.state.saved_data[valIndex], new_value);\n        }\n    }\n\n    handleEvalChange(value) {\n        let e_kind = value.split(\"_\")[0];\n        let e_index = value.split(\"_\")[1];\n        let e_var = null;\n        if(e_kind===\"default\") {\n            e_var = default_variables[e_index];\n        } else {\n            e_var = ls.get(this.props.eval_storage_key)[e_index];\n        }\n        this.setState({\n            \"eval_option\": value,\n            \"eval_variables\": e_var,\n        });\n        this.setMap(this.state.map, null, null, e_var);\n    }\n\n    getSelectNewMapValue(selected_item=null) {\n        let new_value = selected_item;\n        if(new_value===null) {\n            new_value = this.getSelectValue();\n        }\n        new_value = new_value.toString();\n        let new_check = new_value.split(\"_\");\n        if(\n            new_check.length===2\n            &&\n            (new_check[0]===\"new\"||new_check[0]===\"newc\")) {\n            return(parseInt(new_check[1]));\n        }\n        return null;\n    }\n\n    getSelectNewMapType() {\n        return this.getSelectValue().split(\"_\")[0];\n    }\n\n    getNewStringValue() {\n        if(!this.state) return \"new_0\";\n        if(this.state.selected_item.toString().substr(0, 3)===\"new\") return this.state.selected_item;\n        return \"new_0\";\n    }\n\n    isSelectNew(selected_item=null) {\n        return this.getSelectNewMapValue(selected_item)!==null;\n    }\n\n    handleFormatDisplayChange() {\n        let int_select = document.getElementById(\"select-system-display\");\n        this.setState({\"system_format\": parseInt(int_select.options[int_select.selectedIndex].value)});\n    }\n\n    onSelectedSystemDrag(event) {\n        this.setState({\n          draggedSystem: this.state.selected_bank_system,\n          message: \"\",\n        });\n    }\n\n    onSystemDrag(event, system) {\n        this.setState({\n          draggedSystem: system,\n          message: \"\",\n        });\n    }\n\n    onSystemDragEnd(event) {\n        this.setState({\n          draggedSystem: null,\n          message: \"\",\n        });\n    }\n\n    onSystemDropped(event, space_index) {\n        if(this.state.draggedSystem !== null) {\n            let new_map = this.state.map.makeCopy();\n            let selected_bank_system = this.state.selected_bank_system;\n            let is_changed = false;\n            if(space_index !== null) {\n                let space = new_map.spaces[space_index];\n                if(space.type === MAP_SPACE_TYPES.OPEN) {\n                    if(this.state.selected_bank_system !== null && this.state.selected_bank_system.id === this.state.draggedSystem.id) {\n                        selected_bank_system = null;\n                    }\n                    let old_space = new_map.getSpaceBySystemID(this.state.draggedSystem.id);\n                    if(old_space) {\n                        old_space.type = MAP_SPACE_TYPES.OPEN;\n                        old_space.system = null;\n                    }\n                    space.system = this.state.draggedSystem;\n                    space.type = MAP_SPACE_TYPES.SYSTEM;\n                    is_changed = true;\n                } else if(space.type === MAP_SPACE_TYPES.SYSTEM && !space.system.isMecatolRexSystem()) {\n                    let replaced_system = space.system;\n                    if (selected_bank_system !== null && selected_bank_system.id === this.state.draggedSystem.id) {\n                        selected_bank_system = replaced_system;\n                    } else {\n                        new_map.getSpaceBySystemID(this.state.draggedSystem.id).system = replaced_system;\n                    }\n                    space.system = this.state.draggedSystem;\n                    is_changed = true;\n                }\n            } else {\n                let old_space = new_map.getSpaceBySystemID(this.state.draggedSystem.id);\n                if(old_space) {\n                    selected_bank_system = old_space.system;\n                    old_space.type = MAP_SPACE_TYPES.OPEN;\n                    old_space.system = null;\n                    is_changed = true;\n                }\n            }\n\n            if(is_changed) {\n                this.setMap(new_map);\n                this.setState({\"selected_bank_system\": selected_bank_system,});\n            }\n            this.onSystemDragEnd(event);\n        }\n    }\n\n    handleIncludeWormholesChange() {\n        let isChecked = document.getElementById(\"require-all-wormholes\").checked;\n        this.setState(\n            {\"option_include_all_wormholes\": isChecked}\n        );\n    }\n\n    handlePairWormholesChange() {\n        let isChecked = document.getElementById(\"pair-wormholes\").checked;\n        this.setState(\n            {\"option_pair_wormholes\": isChecked}\n        );\n    }\n\n    handleTargetRatioChange() {\n        let int_select = document.getElementById(\"target-ratio\");\n        let int_value = int_select.options[int_select.selectedIndex].value\n        if(int_value !== \"random\") int_value = parseInt(int_value);\n        this.setState({\"target_blue_total\": int_value});\n    }\n\n    loadDefault(index) {\n        let toLoad = this.default_layouts[index];\n        this.setLayout(toLoad, \"new_\"+index);\n        let loadedTitle = toLoad.title;\n        let new_message = \"Blank map '\"+loadedTitle+\"' displayed.\";\n        this.setState({\n            \"message\": new_message,\n            \"input_title\": loadedTitle,\n        });\n    }\n\n    loadCustomLayout(index) {\n        let toLoad = ls.get(this.props.layout_storage_key)[index];\n        let new_map = this.getLayoutFromJSON(toLoad.data);\n        let loadedTitle = toLoad.title;\n        let new_message = \"Custom layout '\"+loadedTitle+\"' displayed.\";\n        this.setMap(new_map);\n        this.setState({\n            \"message\": new_message,\n            \"input_title\": loadedTitle,\n            \"selected_item\": \"newc_\"+index,\n        });\n    }\n\n    getNewLayout() {\n        let toLoad = this.default_layouts[0];\n        let new_map = this.getLayoutFromJSON(toLoad.data);\n        return new_map;\n    }\n\n    getMapString(map = this.state.map) {\n        let final_string = \"\";\n        let is_first = \"\";\n        let coord_order = map_string_order.slice();\n        if(map.spaces.length<=37) coord_order.splice(36, 24);\n        for(let one_coor of coord_order) {\n            let one_space = getObjFromCoord(one_coor, map.spaces);\n            if(one_space && one_space.type===MAP_SPACE_TYPES.SYSTEM && one_space.system) {\n                final_string+=is_first+one_space.system.id;\n            } else {\n                final_string+=is_first+\"0\";\n            }\n            is_first = \" \";\n        }\n        return final_string;\n    }\n\n    loadMapFromString(map_string = this.state.map_string) {\n        let new_map = this.state.map.makeCopy();\n        let new_bank = this.state.bank_systems;\n        let id_list = map_string.split(\" \");\n        let coord_list = map_string_order.slice();\n        if(id_list.length<=37) coord_list.splice(36, 24);\n        for(let [index, one_id_string] of id_list.entries()) {\n            let one_id = parseInt(one_id_string);\n            if(one_id!==0) {\n                let one_system = new_bank.getSystemByID(one_id);\n                if(!one_system) {\n                    let one_system_space = new_map.getSpaceBySystemID(one_id);\n                    if(!one_system_space) {\n                        this.setState({\"message\":\"Space not found.\"});\n                        return;\n                    }\n                    one_system = one_system_space.system;\n                    one_system_space.type = MAP_SPACE_TYPES.OPEN;\n                    one_system_space.system = null;\n                    new_bank = this.syncBankSystems(new_map);\n                }\n                let new_space = getObjFromCoord(coord_list[index], new_map.spaces);\n                if(!new_space) {\n                    this.setState({\"message\":\"Invalid: Too many systems listed.\"});\n                    return;\n                }\n                if(new_space.type!==MAP_SPACE_TYPES.OPEN && new_space.type!==MAP_SPACE_TYPES.SYSTEM) {\n                    this.setState({\"message\":\"Invalid: Placing system on improper space.\"});\n                    return;\n                }\n                if(new_space.type===MAP_SPACE_TYPES.SYSTEM && new_space.system.isMecatolRexSystem()) {\n                    this.setState({\"message\":\"Invalid: Systems on top of Mecatol Rex.\"});\n                    return;\n                }\n                if(new_space.type===MAP_SPACE_TYPES.OPEN) {\n                    new_space.type = MAP_SPACE_TYPES.SYSTEM;\n                }\n                new_space.system = one_system;\n                new_bank = this.syncBankSystems(new_map);\n            }\n        }\n        this.setState({\"message\": \"Map string loaded.\"});\n        this.setMap(new_map);\n    }\n\n    clickedSpace(index) {\n        let newState = Object.assign({},{\n            \"message\": \"\",\n            \"selected_bank_system\": this.state.selected_bank_system,\n        });\n        let new_map = this.state.map.makeCopy();\n        let clickedSpace = new_map.spaces[index];\n        let isChanged = false;\n\n        switch(clickedSpace.type) {\n            case MAP_SPACE_TYPES.OPEN:\n                if(newState.selected_bank_system !== null) {\n                    clickedSpace.system = newState.selected_bank_system;\n                    clickedSpace.type = MAP_SPACE_TYPES.SYSTEM;\n                    newState.selected_bank_system = null;\n                    isChanged = true;\n                }\n                break;\n            case MAP_SPACE_TYPES.SYSTEM:\n                if(!clickedSpace.system.isMecatolRexSystem()) {\n                    if(newState.selected_bank_system !== null) {\n                        let replacement_system = newState.selected_bank_system;\n                        newState.selected_bank_system = clickedSpace.system;\n                        clickedSpace.system = replacement_system;\n                        isChanged = true;\n                    } else {\n                        newState.selected_bank_system = clickedSpace.system;\n                        clickedSpace.system = null;\n                        clickedSpace.type = MAP_SPACE_TYPES.OPEN;\n                        isChanged = true;\n                    }\n                }\n                break;\n            default:\n                break;\n        }\n\n        if(isChanged) {\n            this.setState(newState);\n            this.setMap(new_map);\n        }\n\n    }\n\n    autoCompleteStart() {\n        if(!this.state.long_op) {\n            this.setState({\n                    \"message\": \"Thinking...\",\n                    \"long_op\": true,\n                },\n                () => {\n                    setTimeout(this.autoComplete.bind(this), 1);\n                }\n            );\n        }\n    }\n\n    autoComplete() {\n        let map_history = [{\n            \"map\": this.state.map.makeCopy(this.planet_box),\n            \"system_box\": this.state.bank_systems.makeCopy(),\n        }];\n        let gotamap = true;\n        while(!map_history[map_history.length-1].map.isComplete()) {\n            map_history = this._autoCompleteSteps(map_history, 1);\n            if(map_history===false) {\n                gotamap=false;\n                break;\n            }\n        }\n        if (!gotamap) {\n            this.autoComplete()\n        }\n        else {\n            this.setMap(map_history[map_history.length-1].map);\n            this.setState({\n                \"message\":  \"Map completed randomly.\",\n                \"selected_bank_system\": null,\n                \"long_op\": false,\n            });\n        }\n    }\n\n    _autoCompleteSteps(current_history, steps_forward, current_try_total=0, backwards_length=null) {\n        if(backwards_length===null) backwards_length=current_history.length;\n        let starting_length = current_history.length;\n        for(let tries=current_try_total; tries<LOOPS_TO_TRY; tries++) {\n            let new_history = this._addOneSystem(current_history[current_history.length-1]);\n            if(!(new_history===false)) {\n                current_history.push(new_history);\n                if(current_history.length >= starting_length+steps_forward) {\n                    return current_history;\n                } else {\n                    return this._autoCompleteSteps(current_history, steps_forward-1, tries, backwards_length);\n                }\n            }\n        }\n        let steps_forward_add = 0;\n        while(current_history.length>=backwards_length) {\n            steps_forward_add++;\n            current_history.pop();\n        }\n        if(current_history.length===0) {\n            return false;\n        }\n        return this._autoCompleteSteps(\n            current_history,\n            steps_forward+steps_forward_add,\n            0,\n            backwards_length-1);\n    }\n\n    _addOneSystem(newest_history) {\n        let avail_sys_pool = [];\n        let system_box = newest_history.system_box;\n        let map = newest_history.map;\n        for(let one_sys of system_box.systems) {\n            let can_add = true;\n            if (\n                this.state.option_include_all_wormholes &&\n                one_sys.wormhole === null &&\n                system_box.getWormholeSystems().length >= map.getOpenSpacesTotal()\n            ) {\n                can_add = false;\n            } else {\n                if (this.state.option_pair_wormholes) {\n                    let total_needed = 0;\n                    let b_holes = system_box.getWormholeSystems(WORMHOLES.BETA).length;\n                    let a_holes = system_box.getWormholeSystems(WORMHOLES.ALPHA).length;\n                    if (b_holes === 1) total_needed++;\n                    if (a_holes === 1) total_needed++;\n                    if (\n                        total_needed >= map.getOpenSpacesTotal()\n                        &&\n                        (\n                            one_sys.wormhole === null\n                            ||\n                            (one_sys.wormhole !== WORMHOLES.BETA && a_holes !== 1)\n                            ||\n                            (one_sys.wormhole !== WORMHOLES.ALPHA && b_holes !== 1)\n                        )\n                    ) can_add = false;\n                }\n                if (can_add) avail_sys_pool.push(one_sys);\n            }\n        }\n        if(this.state.target_blue_total!==\"random\") {\n            let target_ratio = this.state.target_blue_total/(map.getPossibleSystemTotal()-this.state.target_blue_total);\n            let current_ratio = map.getBlueSystemTotal()/map.getRedSystemTotal();\n            if(target_ratio<current_ratio) {\n                let replacement_pool = [];\n                for(let one_sys of avail_sys_pool) {\n                    if(one_sys.isRed()) replacement_pool.push(one_sys);\n                }\n                if(replacement_pool.length>0) avail_sys_pool = replacement_pool;\n            } else if(target_ratio>current_ratio) {\n                let replacement_pool = [];\n                for(let one_sys of avail_sys_pool) {\n                    if(one_sys.isBlue()) replacement_pool.push(one_sys);\n                }\n                if(replacement_pool.length>0) avail_sys_pool = replacement_pool;\n            }\n        }\n        let chosen_system = avail_sys_pool[Math.floor(Math.random() * avail_sys_pool.length)];\n        let avail_space_pool = [];\n        for(let [index, one_space] of map.spaces.entries()) {\n            if(one_space.type===MAP_SPACE_TYPES.OPEN) avail_space_pool.push(index);\n        }\n        let chosen_space_index = avail_space_pool[Math.floor(Math.random() * avail_space_pool.length)];\n        let new_map = map.makeCopy();\n        new_map.spaces[chosen_space_index].type = MAP_SPACE_TYPES.SYSTEM;\n        new_map.spaces[chosen_space_index].system = chosen_system;\n        let new_box = this.syncBankSystems(new_map);\n\n        if(new_map.isLegal()) {\n            return {\n                \"map\": new_map,\n                \"system_box\": new_box,\n            }\n        } else {\n            return false;\n        }\n    }\n\n    getHomeValues(map = this.state.map, evars = this.state.eval_variables) {\n        let home_values = {};\n        for(let [index, one_space] of map.spaces.entries()) {\n            if(one_space.type === MAP_SPACE_TYPES.HOME) {\n                home_values[index.toString()] = map.getHomeValue(\n                    one_space, evars,\n                );\n            }\n        }\n        return home_values;\n    }\n\n    getBalanceDifference(home_values = this.state.home_values) {\n        let max = null;\n        let min = null;\n        for(let one_home_key in home_values) {\n            if(home_values.hasOwnProperty(one_home_key)) {\n                if (max === null || home_values[one_home_key] > max) max = home_values[one_home_key];\n                if (min === null || home_values[one_home_key] < min) min = home_values[one_home_key];\n            }\n        }\n        return max-min;\n    }\n\n    handleBalanceOptionChange(which_option) {\n        let options = Object.assign({}, this.state.balance_options);\n        options[which_option] = !options[which_option];\n        this.setState({\"balance_options\": options});\n    }\n\n    improveBalanceStart() {\n        if(!this.state.long_op) {\n            this.setState({\n                    \"message\": \"Thinking...\",\n                    \"long_op\": true,\n                },\n                ()=>{\n                    setTimeout(this.improveBalance.bind(this), 1);\n                }\n            );\n        }\n    }\n\n    improveBalance() {\n        return new Promise((resolve)=> {\n            let map = this.state.map;\n            let eligible_system_spaces = [];\n            for (let [index, one_space] of map.spaces.entries()) {\n                if (one_space.type === MAP_SPACE_TYPES.SYSTEM) {\n                    if (\n                        !one_space.system.isMecatolRexSystem()\n                        &&\n                        (!this.state.balance_options.dont_move_wormholes\n                            || one_space.system.wormhole === null)\n                        &&\n                        (!this.state.balance_options.dont_move_anomalies\n                            || one_space.system.anomalies === null)\n                        &&\n                        (!this.state.balance_options.dont_move_empty\n                            || one_space.system.wormhole !== null\n                            || one_space.system.anomalies !== null\n                            || one_space.system.planets.length > 0)\n                    ) eligible_system_spaces.push(index);\n                }\n            }\n            shuffle(eligible_system_spaces);\n            let found_it = false;\n            let new_map = null;\n            let new_hv = null;\n            let new_diff = null;\n            // Precompute evaluations once\n            const evaluations = Object.fromEntries(\n                eligible_system_spaces.map(i => [i, this.state.map.spaces[i].system.evaluate(this.state.eval_variables)])\n            );\n            for(let a=0; a<eligible_system_spaces.length; a++) {\n                for(let b=0; b<eligible_system_spaces.length; b++) {\n                    if(a!==b  && evaluations[a] !== evaluations[b]) {\n                        new_map = this.state.map.makeCopy();\n                        let replaced_system = new_map.spaces[eligible_system_spaces[b]].system;\n                        new_map.spaces[eligible_system_spaces[b]].system = new_map.spaces[eligible_system_spaces[a]].system;\n                        new_map.spaces[eligible_system_spaces[a]].system = replaced_system;\n                        if (new_map.isLegal()) {\n                            new_hv = this.getHomeValues(new_map);\n                            new_diff = this.getBalanceDifference(new_hv);\n                            if (new_diff < this.state.balance_difference) {\n                                found_it = true;\n                                break;\n                            }\n                        }\n                    }\n                }\n                if(found_it) break;\n            }\n            if (found_it) {\n                this.setMap(new_map, new_hv, new_diff);\n                this.setState({\n                    \"message\": \"Balance gap has been improved.\",\n                    \"long_op\": false,\n                });\n            } else {\n                this.setState({\n                    \"message\": \"Failed to improve balance gap.\",\n                    \"long_op\": false,\n                });\n            }\n        });\n    }\n\n    getEvalOptions() {\n        let options = [];\n        for(let [index, one_default] of default_variables.entries()) {\n            options.push({\n                \"index\": \"default_\"+index,\n                \"title\": one_default.title,\n            })\n        }\n        let evals = ls.get(this.props.eval_storage_key) || [];\n        for(let [index, one_saved] of evals.entries() || []) {\n            options.push({\n                \"index\": \"custom_\"+index.toString(),\n                \"title\": one_saved.title,\n            });\n        }\n        return options;\n    }\n\n    getOptions() {\n        let options = [];\n        for(let [index, one_default] of this.default_layouts.entries()) {\n            options.push({\n                \"index\": \"new_\"+index,\n                \"title\": \"New from default layout \"+one_default.title,\n            });\n        }\n        for(let [index, one_custom_l] of (ls.get(this.props.layout_storage_key) || []).entries()) {\n            if(this.getLayoutFromJSON(one_custom_l.data).areWarpsLogical()) {\n                options.push({\n                    \"index\": \"newc_\" + index,\n                    \"title\": \"New from custom layout \" + one_custom_l.title,\n                });\n            }\n        }\n        for(let [index, one_saved] of this.state.saved_data.entries()) {\n            options.push({\n                \"index\": index,\n                \"title\": one_saved.title\n            });\n        }\n        return options;\n    }\n\n    togglePoKExpansion() {\n        this.setState({\n            include_pok_expansion_systems: !this.state.include_pok_expansion_systems,\n            bank_systems: this.syncBankSystems(\n                this.state.map,\n                !this.state.include_pok_expansion_systems,\n                this.state.include_te_expansion_systems,\n                this.state.include_base_systems\n            ),\n        });\n    }\n\n    toggleTEExpansion() {\n        this.setState({\n            include_te_expansion_systems: !this.state.include_te_expansion_systems,\n            bank_systems: this.syncBankSystems(\n                this.state.map,\n                this.state.include_pok_expansion_systems,\n                !this.state.include_te_expansion_systems,\n                this.state.include_base_systems\n            ),\n        });\n    }\n\t\n    toggleBaseSystems() {\n        this.setState({\n            include_base_systems: !this.state.include_base_systems,\n            bank_systems: this.syncBankSystems(\n                this.state.map,\n                this.state.include_expansion_systems,\n                this.state.include_te_expansion_systems,\n                !this.state.include_base_systems\n            ),\n        });\n    }\n\n    render() {\n        let is_legal = (<label className=\"button is-outlined is-small is-danger\">Illegal</label>);\n        if(this.state.map.isLegal()) is_legal = (<label className=\"button is-small is-outlined is-success\">Legal</label>);\n        let is_complete = (<label className=\"button is-outlined is-small is-danger\">Incomplete</label>);\n        if(this.state.map.isComplete()) is_complete = (<label className=\"button is-small is-outlined is-success\">Complete</label>);\n\n        let options = [];\n        for(let opt of this.getOptions()) {\n            options.push(\n                <option value={opt.index} key={opt.index}>{opt.title}</option>\n            );\n        }\n\n        let eval_options = [];\n        for(let opt of this.getEvalOptions()) {\n            eval_options.push(\n                <option value={opt.index} key={opt.index}>{opt.title}</option>\n            );\n        }\n\n        let auto_complete_ratios = [(<option value=\"random\" key=\"random\">Blue/Red Target Ratio: Random</option>)];\n        let red_total = this.state.map.getRedSystemTotal();\n        let blue_total = this.state.map.getBlueSystemTotal();\n        let open_spaces = this.state.map.getOpenSpacesTotal();\n        let blue_avail = this.state.bank_systems.getBlueSystemTotal();\n        let red_avail = this.state.bank_systems.getRedSystemTotal();\n        for(let s=0; s<=open_spaces; s++) {\n            if(s<=blue_avail && open_spaces-s<=red_avail) {\n                auto_complete_ratios.push((\n                    <option\n                        value={s+blue_total}\n                        key={s+blue_total}\n                    >\n                        Blue/Red Target Ratio: {s+blue_total}/{open_spaces-s+red_total}\n                    </option>\n                ));\n            }\n\n        }\n\n        let bal_diff =  null;\n        if(this.state.balance_difference!==null) {\n            bal_diff = (<p className=\"control\"><label className=\"label\">Balance Gap: {this.state.balance_difference}</label></p>);\n        }\n\n\n        return(\n            <div className=\"block\">\n                <h2 className=\"title is-size-4\">Map Editor</h2>\n                <div className=\"block map-lab-control-panel\">\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Saved/Defaults:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <span className=\"select is-small\">\n                                        <select id=\"layout-select\" value={this.state.selected_item}\n                                                onChange={() => this.handleSelectChange()}>\n                                            {options}\n                                        </select>\n                                    </span>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONDownloadButton\n                                        title=\"Download All\"\n                                        getDownloadInfo={() => this.getAllLayoutJSONFileInfo()}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button onClick={() => this.deleteAll()} className=\"button is-small\">Delete All\n                                    </button>\n                                </p>\n                                <JSONUploadButton\n                                    id=\"layout-json-upload\"\n                                    title=\"Upload\"\n                                    handleJSON={(data) => this.addLayoutsFromJSON(data)}\n                                    className=\"button is-small\"\n                                />\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Map Title:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <input\n                                        className=\"input is-small\"\n                                        type=\"text\"\n                                        id=\"layout-title\"\n                                        value={this.state.input_title}\n                                        onChange={function() {\n                                            this.setState(\n                                                {\n                                                    \"input_title\": document.getElementById(\"layout-title\").value,\n                                                    \"message\": \"\"\n                                                }\n                                            );\n                                        }.bind(this)}\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.saveCurrent()}>Save</button>\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.handleSelectChange()}>Reset</button>\n                                </p>\n                                <p className=\"control\">\n                                    <button\n                                        className=\"button is-small\"\n                                        onClick={()=>this.deleteCurrent()}\n                                        disabled={this.isSelectNew(this.state.selected_item)}\n                                    >Delete</button>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONDownloadButton\n                                        title=\"Download\"\n                                        className=\"button is-small\"\n                                        getDownloadInfo={()=>this.getCurrentLayoutJSONFileInfo()}\n                                    />\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">System Display:</label>\n                        </div>\n                        <div className=\"field-body\">\n                             <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <span className=\"select is-small\">\n                                        <select\n                                            id=\"select-system-display\"\n                                            value={this.state.system_format}\n                                            onChange={()=>this.handleFormatDisplayChange()}\n                                        >\n                                            <option value={SYSTEM_FORMATS.STREAMLINED}>Streamlined</option>\n                                            <option value={SYSTEM_FORMATS.STREAMLINED_WITH_NAME}>Streamlined + Name</option>\n                                            <option value={SYSTEM_FORMATS.COLORBLIND_FRIENDLY}>Colorblind Friendly</option>\n                                            <option value={SYSTEM_FORMATS.COLORBLIND_FRIENDLY_WITH_NAME}>Colorblind Friendly + Name</option>\n                                            <option value={SYSTEM_FORMATS.ID_ONLY}>ID Only</option>\n                                        </select>\n                                    </span>\n                                </p>\n                                <p className=\"control\">\n                                    <label className=\"label\">Map Status:</label>\n                                </p>\n                                <p className=\"control\">\n                                    {is_complete}\n                                </p>\n                                <p className=\"control\">\n                                    {is_legal}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Map String:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control is-expanded\">\n                                    <input\n                                        className=\"input is-small\"\n                                        type=\"text\"\n                                        id=\"map-string\"\n                                        value={this.state.map_string}\n                                        onChange={function() {\n                                            this.setState(\n                                                {\n                                                    \"map_string\": document.getElementById(\"map-string\").value,\n                                                    \"message\": \"\"\n                                                }\n                                            );\n                                        }.bind(this)}\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.loadMapFromString()}>\n                                        Load From String\n                                    </button>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"columns\">\n                    <div className=\"column is-one-fifth-desktop is-narrow-tablet map-controls-column\">\n                        {this.getMessageHtml()}\n                        <div className=\"field\">\n                            <label className=\"label\">Auto-Complete</label>\n                            <p className=\"control\">\n                                <input\n                                    id=\"require-all-wormholes\"\n                                    type=\"checkbox\"\n                                    checked={this.state.option_include_all_wormholes}\n                                    onChange={()=>this.handleIncludeWormholesChange()}\n                                />\n                                <label htmlFor=\"require-all-wormholes\"> Require Wormholes</label>\n                            </p>\n                            <p className=\"control\">\n                                <input\n                                    id=\"pair-wormholes\"\n                                    type=\"checkbox\"\n                                    checked={this.state.option_pair_wormholes}\n                                    onChange={()=>this.handlePairWormholesChange()}\n                                />\n                                <label htmlFor=\"pair-wormholes\"> Pair Wormholes</label>\n                            </p>\n                            <p className=\"control\">\n                                <span className=\"select is-small\">\n                                    <select\n                                        id=\"target-ratio\"\n                                        value={this.state.target_blue_total}\n                                        onChange={()=>this.handleTargetRatioChange()}\n                                    >\n                                        {auto_complete_ratios}\n                                    </select>\n                                </span>\n                            </p>\n                            <p className=\"control\">\n                                <button\n                                    onClick={()=>this.autoCompleteStart()}\n                                    disabled={\n                                        !this.state.map.isLegal()\n                                        || this.state.map.isComplete()\n                                        || this.state.long_op===true\n\t\t\t\t\t\t\t\t\t\t|| this.state.bank_systems.systems.length < this.state.map.getTotalOpen()\n                                    }\n                                    className=\"button is-small is-primary\"\n                                >\n                                    Auto-Complete Map\n                                </button>\n                            </p>\n                        </div>\n                        <div className=\"field\">\n                            <label className=\"label\">Improve Balance</label>\n                            <p className=\"control\">\n                                <span className=\"select is-small\">\n                                    <select id=\"eval-select\" value={this.state.eval_option}\n                                            onChange={(event) => this.handleEvalChange(event.target.value)}>\n                                        {eval_options}\n                                    </select>\n                                </span>\n                            </p>\n                            {bal_diff}\n                            <p className=\"control\">\n                                <input\n                                    id=\"dont-move-wormholes\"\n                                    type=\"checkbox\"\n                                    checked={this.state.balance_options.dont_move_wormholes}\n                                    onChange={()=>this.handleBalanceOptionChange(\"dont_move_wormholes\")}\n                                />\n                                <label htmlFor=\"dont-move-wormholes\"> Lock Wormholes</label>\n                            </p>\n                            <p className=\"control\">\n                                <input\n                                    id=\"dont-move-anomalies\"\n                                    type=\"checkbox\"\n                                    checked={this.state.balance_options.dont_move_anomalies}\n                                    onChange={()=>this.handleBalanceOptionChange(\"dont_move_anomalies\")}\n                                />\n                                 <label htmlFor=\"dont-move-anomalies\"> Lock Anomalies</label>\n                            </p>\n                            <p className=\"control\">\n                                <input\n                                    id=\"dont-move-empty\"\n                                    type=\"checkbox\"\n                                    checked={this.state.balance_options.dont_move_empty}\n                                    onChange={()=>this.handleBalanceOptionChange(\"dont_move_empty\")}\n                                />\n                                <label htmlFor=\"dont-move-empty\"> Lock Empty Spaces</label>\n                            </p>\n                            <p className=\"control\">\n                                <button\n                                    onClick={()=>this.improveBalanceStart()}\n\n                                    disabled={!this.state.map.isComplete() || this.state.long_op===true}\n                                    className=\"button is-small is-primary\"\n                                >\n                                    Improve Balance\n                                </button>\n                            </p>\n                        </div>\n                        <SystemBankComponent\n                            systems={this.state.bank_systems}\n                            include_pok_expansion_systems={this.state.include_pok_expansion_systems}\n                            togglePoKExpansion={()=>this.togglePoKExpansion()}\n                            include_te_expansion_systems={this.state.include_te_expansion_systems}\n                            toggleTEExpansion={()=>this.toggleTEExpansion()}\n\t\t\t\t\t\t\tinclude_base_systems={this.state.include_base_systems}\n\t\t\t\t\t\t\ttoggleBaseSystems={()=>this.toggleBaseSystems()}\n                            active_system={this.state.selected_bank_system}\n                            setActiveSystem={(system)=>this.setActiveBankSystem(system)}\n                            system_format={this.state.system_format}\n                            onSelectedSystemDrag={(event)=>this.onSelectedSystemDrag(event)}\n                            onSystemDragEnd={(event)=>this.onSystemDragEnd(event)}\n                            onSystemDropped={(event)=>this.onSystemDropped(event,null)}\n                            eval_variables={this.state.eval_variables}\n                        />\n\t\t\t\t\t\t<div className=\"stats-container\">\n\t\t\t\t\t\t\t<p>Blue/Red: {this.state.map.getBlueSystemTotal()}/{this.state.map.getRedSystemTotal()}</p>\n\t\t\t\t\t\t\t<p>Resources/Influence: {this.state.map.getTotalResources()}/{this.state.map.getTotalInfluence()}</p>\n\t\t\t\t\t\t\t<p>Tech: {this.state.map.getTotalTechSpecialties()}</p>\n\t\t\t\t\t\t\t<p>Traits R/G/B: {this.state.map.getPlanetTraitTotals()}</p>\n\t\t\t\t\t\t</div>\n                    </div>\n                    <div className=\"column map-container\">\n                        <MapComponent\n                            map={this.state.map}\n                            eval_variables={this.state.eval_variables}\n                            system_format={this.state.system_format}\n                            system_box={this.system_box}\n                            clickedSpace={(index)=>this.clickedSpace(index)}\n                            map_class=\"map-map\"\n                            systems_draggable={!this.state.long_op}\n                            onSystemDrag={(event, system)=>this.onSystemDrag(event, system)}\n                            onSystemDragEnd={(event)=>this.onSystemDragEnd(event)}\n                            onSystemDropped={(event, space)=>this.onSystemDropped(event, space)}\n                            home_values={this.state.home_values}\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport $ from 'jquery';\n\nimport {warp_configs} from \"../data/warp_data\";\n\nimport {\n    Map,\n    MapSpace,\n    areCoordsInList,\n} from \"../map-logic\";\nimport {\n    SYSTEM_FORMATS,\n    MapComponent,\n    MAP_SPACE_TYPES,\n} from \"../map-components\";\nimport {\n    JSONDownloadButton,\n    JSONUploadButton,\n} from \"../download-helpers\";\nimport {BaseEditor} from \"./base-editor\";\nimport {compareByID} from \"../utilities\";\n\nwindow.jQuery = $;\n\nexport class LayoutEditor extends BaseEditor {\n    constructor(props) {\n        super(props);\n        this.state.map = this.getNewLayout();\n        this.state.show_warps = false;\n        this.state.show_wormholes = false;\n        this.state.show_anomalies = false;\n        if(this.props.state_to_import) {\n            let matching_options = this.getOptions().filter(option => option.index === this.props.state_to_import.selected_item);\n            if (matching_options.length > 0) {\n                this.state = this.props.state_to_import;\n            }\n        }\n    }\n\n    handleSelectChange() {\n        let new_value = this.getSelectValue();\n        if(new_value === \"new\") {\n            this.setNewLayout();\n        } else {\n            let valIndex = parseInt(new_value);\n            this.setLayout(this.state.saved_data[valIndex], new_value);\n        }\n    }\n\n    syncBankSystems(what) {\n        \n    }\n\n    isSelectNew(selected_item=null) {\n        if(selected_item !== null) return selected_item===\"new\";\n        return this.getSelectValue() === \"new\";\n    }\n\n    getNewStringValue() {\n        return \"new\";\n    }\n\n    handleWarpChange() {\n        let isChecked = document.getElementById(\"warp-checkbox\").checked;\n        this.setState({\"show_warps\": isChecked});\n    }\n    handleWormholeChange() {\n        let isChecked = document.getElementById(\"wormhole-checkbox\").checked;\n        this.setState({\"show_wormholes\": isChecked});\n    }\n    handleAnomaliesChange() {\n        let isChecked = document.getElementById(\"anomalies-checkbox\").checked;\n        this.setState({\"show_anomalies\": isChecked});\n    }\n\n    clickedSpace(index) {\n        let new_map = this.state.map.makeCopy();\n        let new_message = \"\";\n        let clickedSpace = new_map.spaces[index];\n        let go_next_type = false;\n\n        switch(clickedSpace.type) {\n            case MAP_SPACE_TYPES.WARP:\n                if(!this.state.show_warps) {\n                    go_next_type=true;\n                    clickedSpace.warp_spaces = null;\n                } else {\n                    clickedSpace.warp_spaces = this._getNextWarp(new_map, clickedSpace);\n                    if(clickedSpace.warp_spaces===null) go_next_type=true;\n                }\n                break;\n            case MAP_SPACE_TYPES.SYSTEM:\n                clickedSpace.system = this._getNextSystem(new_map, clickedSpace);\n                if(clickedSpace.system===null) go_next_type = true;\n                break;\n            default:\n                go_next_type = true;\n                break;\n        }\n        if(go_next_type) {\n            let keep_going = true;\n            while(keep_going) {\n                clickedSpace.type++;\n                if(clickedSpace.type > MAP_SPACE_TYPES.WARP) {\n                    clickedSpace.type = 1;\n                }\n                switch(clickedSpace.type) {\n                    case MAP_SPACE_TYPES.SYSTEM:\n                        clickedSpace.system = this._getNextSystem(new_map, clickedSpace);\n                        if(clickedSpace.system!==null) keep_going = false;\n                        break;\n                    case MAP_SPACE_TYPES.WARP:\n                        if(this.state.show_warps){\n                            clickedSpace.warp_spaces = this._getNextWarp(new_map, clickedSpace);\n                            if(clickedSpace.warp_spaces!==null) keep_going=false;\n                        }\n                        break;\n                    default:\n                        keep_going = false;\n                        break;\n                }\n            }\n\n        }\n        if(!new_map.areWarpsLogical()) {\n            new_message = \"Warps do not yet connect to legal spaces. Layout not usable until warps connect.\";\n        }\n        this.setMap(new_map);\n        this.setState({\"message\": new_message,})\n    }\n\n    loadDefault(index) {\n        let toLoad = this.default_layouts[index];\n        let new_map = this.getLayoutFromJSON(toLoad.data);\n        let loadedTitle = toLoad.title;\n        let new_message = \"Default layout '\"+loadedTitle+\"' displayed.\";\n        this.setMap(new_map);\n        this.setState({\n            \"message\": new_message,\n            \"input_title\": loadedTitle,\n            \"selected_item\": this.getNewStringValue(),\n        });\n    }\n\n    getNewLayout() {\n        let starting_space = new MapSpace(0,0,0);\n        return new Map(true, starting_space, 3);\n    }\n\n    setNewLayout() {\n        let map = this.getNewLayout();\n        this.setMap(map);\n        this.setState({\"selected_item\": this.getNewStringValue(), \"message\": \"\", \"input_title\": \"\"});\n    }\n\n    _getNextWarp(map, space) {\n        let proposed_warp = space.warp_spaces;\n        if(proposed_warp === null) {\n            proposed_warp = 0;\n        } else {\n            proposed_warp++;\n        }\n        while(proposed_warp < warp_configs.length) {\n            let proposed_config = warp_configs[proposed_warp];\n            let is_legal = true;\n            for(let one_warp of proposed_config) {\n                for(let one_coord of one_warp) {\n                    if(!areCoordsInList(\n                        space.getWarpDirectionCoordinates(one_coord),\n                        map.spaces\n                    )) {\n                        is_legal = false;\n                        break;\n                    }\n                }\n            }\n            if(is_legal) {\n                break;\n            }\n            proposed_warp++;\n        }\n        if(proposed_warp >= warp_configs.length) {\n            return null;\n        }\n        return proposed_warp;\n    }\n\n    _getNextSystem(map, space) {\n        let eligible_systems = [];\n        let current_id = 0;\n        if(space.system!==null) current_id=space.system.id;\n        for(let one_system of this.system_box.systems) {\n            if(\n                map.getSpaceBySystemID(one_system.id)===null\n                &&\n                one_system.id>current_id\n                &&\n                (\n                    one_system.isMecatolRexSystem()\n                    ||\n                    (one_system.wormhole!==null && this.state.show_wormholes)\n                    ||\n                    (one_system.anomalies!==null && this.state.show_anomalies)\n                )\n            ) {\n                eligible_systems.push(one_system);\n            }\n        }\n        if(eligible_systems.length===0) return null;\n        eligible_systems.sort(compareByID);\n        return eligible_systems[0];\n    }\n\n    getOptions() {\n        let options = [{\n            \"index\": \"new\",\n            \"title\": \"New Layout\",\n        }];\n        for(let [index, one_saved] of this.state.saved_data.entries()) {\n            options.push({\n                \"index\": index.toString(),\n                \"title\": one_saved.title,\n            });\n        }\n        return options;\n    }\n\n    render() {\n        let options = [];\n        for(let opt of this.getOptions()) {\n            options.push(\n                <option value={opt.index} key={opt.index}>{opt.title}</option>\n            );\n        }\n        let defaults = [];\n        for(let [index, one_default] of this.default_layouts.entries()) {\n            defaults.push(\n                <p className=\"control\" key={index}>\n                    <button\n                        className=\"button is-small is-link\"\n                        onClick={()=>this.loadDefault(index)}\n                        key={\"default_layout_\"+index}\n                    >\n                        {one_default.title}\n                    </button>\n                </p>\n            )\n        }\n\n        return(\n            <div className=\"block\">\n                <h2 className=\"title is-size-4\">Layout Editor</h2>\n                <div className=\"block map-lab-control-panel\">\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Default Layouts:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                {defaults}\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Saved Layouts:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <span className=\"select is-small\">\n                                        <select\n                                            id=\"layout-select\"\n                                            value={this.state.selected_item}\n                                            onChange={()=>this.handleSelectChange()}\n                                        >\n                                            {options}\n                                        </select>\n                                    </span>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONDownloadButton\n                                        title=\"Download All\"\n                                        getDownloadInfo={()=>this.getAllLayoutJSONFileInfo()}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button onClick={()=>this.deleteAll()} className=\"button is-small\">\n                                        Delete All\n                                    </button>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONUploadButton\n                                        id=\"layout-json-upload\"\n                                        title=\"Upload\"\n                                        handleJSON={(data)=>this.addLayoutsFromJSON(data)}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Layout Title:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <input\n                                        type=\"text\"\n                                        id=\"layout-title\"\n                                        value={this.state.input_title}\n                                        className=\"input is-small\"\n                                        onChange={function() {\n                                            this.setState(\n                                                {\n                                                    \"input_title\": document.getElementById(\"layout-title\").value,\n                                                    \"message\": \"\"\n                                                }\n                                            );\n                                        }.bind(this)}\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.saveCurrent()}>Save</button>\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.handleSelectChange()}>Reset</button>\n                                </p>\n                                <p className=\"control\">\n                                    <button\n                                        onClick={()=>this.deleteCurrent()}\n                                        disabled={this.isSelectNew(this.state.selected_item)}\n                                        className=\"button is-small\"\n                                    >Delete</button>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONDownloadButton\n                                        title=\"Download\"\n                                        getDownloadInfo={()=>this.getCurrentLayoutJSONFileInfo()}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"columns\">\n                        <div className=\"column is-one-fifth-desktop is-narrow-tablet map-controls-column\">\n                            {this.getMessageHtml()}\n                            <div className=\"field\">\n                                <label className=\"label\">Click Cycle</label>\n                                <p className=\"control\">\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={this.state.show_warps}\n                                        onChange={()=>this.handleWarpChange()}\n                                        id=\"warp-checkbox\"\n                                    />\n                                    <label htmlFor=\"warp-checkbox\"> Include Warps in Click Cycle</label>\n                                </p>\n                                <p className=\"control\">\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={this.state.show_wormholes}\n                                        onChange={()=>this.handleWormholeChange()}\n                                        id=\"wormhole-checkbox\"\n                                    />\n                                    <label htmlFor=\"wormhole-checkbox\"> Include Womholes in Click Cycle</label>\n                                </p>\n                                <p className=\"control\">\n                                    <input\n                                        type=\"checkbox\"\n                                        checked={this.state.show_anomalies}\n                                        onChange={()=>this.handleAnomaliesChange()}\n                                        id=\"anomalies-checkbox\"\n                                    />\n                                    <label htmlFor=\"anomalies-checkbox\"> Include Anomalies in Click Cycle</label>\n                                </p>\n                            </div>\n                        </div>\n                        <div className=\"column map-container\">\n                            <MapComponent\n                                map={this.state.map}\n                                system_format={SYSTEM_FORMATS.STREAMLINED}\n                                system_box={this.system_box}\n                                clickedSpace={(index)=>this.clickedSpace(index)}\n                                map_class=\"layout-map\"\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport {PLANET_EVAL_STRATEGIES} from \"./map-logic\";\n\nexport const EVAL_ASPECTS = {\n    \"BASE_PLANET_MOD\": \"BASE_PLANET_MOD\",\n    \"RESOURCES_MULTIPLIER\": \"RESOURCES_MULTIPLIER\",\n    \"INFLUENCE_MULTIPLIER\": \"INFLUENCE_MULTIPLIER\",\n    \"TECH_MOD\": \"TECH_MOD\",\n    \"TECH_PROPULSION_MOD\": \"TECH_PROPULSION_MOD\",\n    \"TECH_WARFARE_MOD\": \"TECH_WARFARE_MOD\",\n    \"TECH_BIOTIC_MOD\": \"TECH_BIOTIC_MOD\",\n    \"TECH_CYBERNETIC_MOD\": \"TECH_CYBERNETIC_MOD\",\n    \"PLANET_STRATEGY\": \"PLANET_STRATEGY\",\n    \"NONZERO_RESOURCES_MOD\": \"NONZERO_RESOURCES_MOD\",\n    \"NONZERO_INFLUENCE_MOD\": \"NONZERO_INFLUENCE_MOD\",\n    \"TRAIT_CULTURAL_MOD\": \"TRAIT_CULTURAL_MOD\",\n    \"TRAIT_HAZARDOUS_MOD\": \"TRAIT_HAZARDOUS_MOD\",\n    \"TRAIT_INDUSTRIAL_MOD\": \"TRAIT_INDUSTRIAL_MOD\",\n    \"SINGLE_PLANET_MOD\": \"SINGLE_PLANET_MOD\",\n    \"MULTI_PLANET_MOD\": \"MULTI_PLANET_MOD\",\n    \"MATCHING_PLANETS_MOD\": \"MATCHING_PLANETS_MOD\",\n    \"NONMATCHING_PLANETS_MOD\": \"NONMATCHING_PLANETS_MOD\",\n    \"MECATOL_REX_SYS_MOD\": \"MECATOL_REX_SYS_MOD\",\n    \"LEGENDARY_PLANET_SYS_MOD\": \"LEGENDARY_PLANET_SYS_MOD\",\n    \"SPACE_STATION_SYS_MOD\": \"SPACE_STATION_SYS_MOD\",\n    \"DISTANCE_MOD_BASE\": \"DISTANCE_MOD_BASE\",\n    \"DISTANCE_MOD_PLANET\": \"DISTANCE_MOD_PLANET\",\n    \"DISTANCE_MOD_EMPTY\": \"DISTANCE_MOD_EMPTY\",\n    \"DISTANCE_MOD_SUPERNOVA\": \"DISTANCE_MOD_SUPERNOVA\",\n    \"DISTANCE_MOD_ASTEROID_FIELD\": \"DISTANCE_MOD_ASTEROID_FIELD\",\n    \"DISTANCE_MOD_GRAVITY_RIFT\": \"DISTANCE_MOD_GRAVITY_RIFT\",\n    \"DISTANCE_MOD_EMPTY_WORMHOLE\": \"DISTANCE_MOD_EMPTY_WORMHOLE\",\n    \"DISTANCE_MOD_PLANET_WORMHOLE\": \"DISTANCE_MOD_PLANET_WORMHOLE\",\n    \"DISTANCE_MOD_NEBULA\": \"DISTANCE_MOD_NEBULA\",\n    \"DISTANCE_MOD_ENTROPIC_SCAR\": \"DISTANCE_MOD_ENTROPIC_SCAR\",\n    \"DISTANCE_MOD_ADJACENT_TO_OPPONENT\": \"DISTANCE_MOD_ADJACENT_TO_OPPONENT\",\n    \"DISTANCE_MULTIPLIER\": \"DISTANCE_MULTIPLIER\",\n};\n\n\nexport class EvaluatorLine extends React.Component {\n    render() {\n        let null_box = null;\n        let nul_val = this.props.num_value===false;\n        if(this.props.hasNullBox) {\n            null_box = (<p className=\"control checkbox-holder\"><input\n                    id={this.props.id+\"-null-box\"}\n                    type=\"checkbox\"\n                    checked={nul_val}\n                    onChange={event => this.props.onNullChange(event.target.checked)}\n            /> Impassable&nbsp;</p>);\n        }\n        let num_value = this.props.num_value;\n        if(num_value===false) num_value = \"\";\n        return(\n            <div className=\"field line-container\">\n                <div>\n                    <label className=\"label\">{this.props.label}:</label>\n                </div>\n                <div>\n                    <div className=\"field all-parts\">\n                        <div className=\"both-controls\">\n                            <div className=\"field is-horizontal input-only\">\n                                <div className=\"m\">\n                                    {this.props.m}\n                                </div>\n                                <p className=\"control\">\n                                     <input\n                                        type=\"number\"\n                                        id={this.props.id+\"-num\"}\n                                        value={num_value}\n                                        className=\"input is-small\"\n                                        onChange={event => this.props.onInputChange(parseInt(event.target.value))}\n                                        disabled={nul_val}\n                                    />\n                                </p>\n                            </div>\n                            {null_box}\n                        </div>\n                        <div className=\"info-container\">\n                            <i className=\"fas fa-info-circle\"></i>\n                            <div className=\"input-info\">\n                                {this.props.helperText}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport class EvaluatorForm extends React.Component {\n    reportChange(which_aspect, value, distance=null) {\n        this.props.changeHandler(which_aspect, value, distance);\n    }\n\n    reportNullChange(which_aspect, value) {\n        if(value===false) {\n            this.reportChange(which_aspect, 0);\n        } else {\n            this.reportChange(which_aspect, false);\n        }\n    }\n\n    render() {\n        return(\n            <div className=\"block content evaluator-form\">\n                <div className=\"form-container\">\n                    <h3>Planet Evaluation</h3>\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Base Planet\"\n                        num_value={this.props.values.BASE_PLANET_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.BASE_PLANET_MOD, value)}\n                        helperText=\"Base value of each planet.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Resources\"\n                        num_value={this.props.values.RESOURCES_MULTIPLIER}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.RESOURCES_MULTIPLIER, value)}\n                        helperText=\"Number to multiply planet resource value by.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Influence\"\n                        num_value={this.props.values.INFLUENCE_MULTIPLIER}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.INFLUENCE_MULTIPLIER, value)}\n                        helperText=\"Number to multiply planet influence value by.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Tech\"\n                        num_value={this.props.values.TECH_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TECH_MOD, value)}\n                        helperText=\"Number to add if the planet has a tech specialty.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Propulsion Tech\"\n                        num_value={this.props.values.TECH_PROPULSION_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TECH_PROPULSION_MOD, value)}\n                        helperText=\"Number to add if the planet has a propulsion tech specialty.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Warfare Tech\"\n                        num_value={this.props.values.TECH_WARFARE_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TECH_WARFARE_MOD, value)}\n                        helperText=\"Number to add if the planet has a warfare tech specialty.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Biotic Tech\"\n                        num_value={this.props.values.TECH_BIOTIC_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TECH_BIOTIC_MOD, value)}\n                        helperText=\"Number to add if the planet has a biotic tech specialty.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Cybernetic Tech\"\n                        num_value={this.props.values.TECH_CYBERNETIC_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TECH_CYBERNETIC_MOD, value)}\n                        helperText=\"Number to add if the planet has a cybernetic tech specialty.\"\n                    />\n                    <div className=\"field line-container\">\n                        <div>\n                            <label className=\"label\">Planet Eval Strategy:</label>\n                        </div>\n                        <div>\n                            <div className=\"field is-grouped\">\n                                <div className=\"field is-horizontal\">\n                                    <p className=\"control\">\n                                        <span className=\"select is-small\">\n                                            <select\n                                                value={this.props.values.PLANET_STRATEGY}\n                                                onChange={event => this.reportChange(\n                                                    EVAL_ASPECTS.PLANET_STRATEGY, event.target.value\n                                                )}\n                                            >\n                                                <option\n                                                    value={PLANET_EVAL_STRATEGIES.SUM}\n                                                    key={PLANET_EVAL_STRATEGIES.SUM}\n                                                >\n                                                    Sum\n                                                </option>\n                                                <option\n                                                    value={PLANET_EVAL_STRATEGIES.GREATEST}\n                                                    key={PLANET_EVAL_STRATEGIES.GREATEST}\n                                                >\n                                                    Greatest\n                                                </option>\n                                                <option\n                                                    value={PLANET_EVAL_STRATEGIES.GREATEST_PLUS_TECH}\n                                                    key={PLANET_EVAL_STRATEGIES.GREATEST_PLUS_TECH}\n                                                >\n                                                    Greatest+Tech\n                                                </option>\n                                            </select>\n                                        </span>\n                                    </p>\n                                </div>\n                                <div className=\"info-container\">\n                                    <i className=\"fas fa-info-circle\"></i>\n                                    <div className=\"input-info\">\n                                        How to combine resources, influence and tech values above.\n                                        <br /><br />Sum = R+I+T\n                                        <br /><br />Greatest = largest of R/I/T\n                                        <br /><br />Greatest+Tech = largest of R/I, +T\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Resources > 0\"\n                        num_value={this.props.values.NONZERO_RESOURCES_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.NONZERO_RESOURCES_MOD, value)}\n                        helperText=\"Number to add if planet resource value is greater than 0.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Influence > 0\"\n                        num_value={this.props.values.NONZERO_INFLUENCE_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.NONZERO_INFLUENCE_MOD, value)}\n                        helperText=\"Number to add if planet influence value is greater than 0.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Cultural Trait\"\n                        num_value={this.props.values.TRAIT_CULTURAL_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TRAIT_CULTURAL_MOD, value)}\n                        helperText=\"Number to add if the planet has the cultural trait.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Hazardous Trait\"\n                        num_value={this.props.values.TRAIT_HAZARDOUS_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TRAIT_HAZARDOUS_MOD, value)}\n                        helperText=\"Number to add if the planet has the hazardous trait.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Industrial Trait\"\n                        num_value={this.props.values.TRAIT_INDUSTRIAL_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.TRAIT_INDUSTRIAL_MOD, value)}\n                        helperText=\"Number to add if the planet has the industrial trait.\"\n                    />\n                    <h3>System Evaluation</h3>\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Single Planet System\"\n                        num_value={this.props.values.SINGLE_PLANET_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.SINGLE_PLANET_MOD, value)}\n                        helperText=\"Number to add if the system has exactly 1 planet.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Multi-planet System\"\n                        num_value={this.props.values.MULTI_PLANET_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.MULTI_PLANET_MOD, value)}\n                        helperText=\"Number to add if the system has more than 1 planet.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Matching Planets System\"\n                        num_value={this.props.values.MATCHING_PLANETS_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.MATCHING_PLANETS_MOD, value)}\n                        helperText=\"Number to add if a system has 2 planets with the same trait.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Non-Matching Planets System\"\n                        num_value={this.props.values.NONMATCHING_PLANETS_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.NONMATCHING_PLANETS_MOD, value)}\n                        helperText=\"Number to add if a system has 2 planets with different traits.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Mecatol Rex System\"\n                        num_value={this.props.values.MECATOL_REX_SYS_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.MECATOL_REX_SYS_MOD, value)}\n                        helperText=\"Number to add if the system contains Mecatol Rex.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Legendary Planet System\"\n                        num_value={this.props.values.LEGENDARY_PLANET_SYS_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.LEGENDARY_PLANET_SYS_MOD, value)}\n                        helperText=\"Number to add if the system contains a Legendary Planet.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Space Station System\"\n                        num_value={this.props.values.SPACE_STATION_SYS_MOD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.SPACE_STATION_SYS_MOD, value)}\n                        helperText=\"Number to add if the system contains a Space Station.\"\n                    />\n                    <h3>Home to System Distance Evaluation</h3>\n                    <h4>Distance Measurement</h4>\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Distance Base\"\n                        num_value={this.props.values.DISTANCE_MOD_BASE}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_BASE, value)}\n                        helperText=\"Base distance unit for every space moved through.\"\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Planet\"\n                        num_value={this.props.values.DISTANCE_MOD_PLANET}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_PLANET, value)}\n                        helperText=\"Distance modifier for systems with 1 or more planets.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_PLANET, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Empty Space\"\n                        num_value={this.props.values.DISTANCE_MOD_EMPTY}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_EMPTY, value)}\n                        helperText=\"Distance modifier for empty space systems.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_EMPTY, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Supernova\"\n                        num_value={this.props.values.DISTANCE_MOD_SUPERNOVA}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_SUPERNOVA, value)}\n                        helperText=\"Distance modifier for supernova systems.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_SUPERNOVA, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Asteroid\"\n                        num_value={this.props.values.DISTANCE_MOD_ASTEROID_FIELD}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_ASTEROID_FIELD, value)}\n                        helperText=\"Distance modifier for asteroid field systems.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_ASTEROID_FIELD, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Gravity Rift\"\n                        num_value={this.props.values.DISTANCE_MOD_GRAVITY_RIFT}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_GRAVITY_RIFT, value)}\n                        helperText=\"Distance modifier for gravity rift systems.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_GRAVITY_RIFT, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Wormholes Without Planets\"\n                        num_value={this.props.values.DISTANCE_MOD_EMPTY_WORMHOLE}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_EMPTY_WORMHOLE, value)}\n                        helperText=\"Distance modifier for wormhole systems without planets.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_EMPTY_WORMHOLE, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Wormholes With a Planet\"\n                        num_value={this.props.values.DISTANCE_MOD_PLANET_WORMHOLE}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_PLANET_WORMHOLE, value)}\n                        helperText=\"Distance modifier for wormhole systems with a planet.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_PLANET_WORMHOLE, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Nebula\"\n                        num_value={this.props.values.DISTANCE_MOD_NEBULA}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_NEBULA, value)}\n                        helperText=\"Distance modifier for nebula systems.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_NEBULA, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Entropic Scar\"\n                        num_value={this.props.values.DISTANCE_MOD_ENTROPIC_SCAR}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_ENTROPIC_SCAR, value)}\n                        helperText=\"Distance modifier for entropic scar systems.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_ENTROPIC_SCAR, value)}\n                    />\n                    <EvaluatorLine\n                        m=\"+\"\n                        label=\"Moving Through Opponent Adj Sys\"\n                        num_value={this.props.values.DISTANCE_MOD_ADJACENT_TO_OPPONENT}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MOD_ADJACENT_TO_OPPONENT, value)}\n                        helperText=\"Distance modifier for systems adjacent to your opponents' home systems.\"\n                        hasNullBox\n                        onNullChange={value => this.reportNullChange(EVAL_ASPECTS.DISTANCE_MOD_ADJACENT_TO_OPPONENT, value)}\n                    />\n                    <h4>System Value Multipliers Based on Modified Distance</h4>\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of <1\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[0]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 0)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 0 or less.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 1\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[1]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 1)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 1.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 2\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[2]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 2)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 2.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 3\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[3]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 3)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 3.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 4\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[4]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 4)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 4.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 5\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[5]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 5)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 5.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 6\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[6]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 6)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 6.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 7\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[7]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 7)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 7.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 8\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[8]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 8)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 8.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 9\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[9]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 9)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is 9.\"\n                    />\n                    <EvaluatorLine\n                        m=\"x\"\n                        label=\"Modified Distance of 10+\"\n                        num_value={this.props.values.DISTANCE_MULTIPLIER[10]}\n                        onInputChange={value => this.reportChange(EVAL_ASPECTS.DISTANCE_MULTIPLIER, value, 10)}\n                        helperText=\"Number to multiply the system's value by when the modified distance to the home planet is greater than 9.\"\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport $ from 'jquery';\n\nimport {\n    JSONDownloadButton,\n    JSONUploadButton,\n} from \"../download-helpers\";\nimport {BaseEditor} from \"./base-editor\";\nimport {EvaluatorForm, EVAL_ASPECTS} from '../evaluator-components';\nimport default_evaluators from '../data/default_evaluators.json';\nimport ls from \"local-storage\";\n\nwindow.jQuery = $;\n\nexport class EvaluationEditor extends BaseEditor {\n    constructor(props) {\n        super(props);\n        this.default_evaluators = default_evaluators;\n        this.state.values = Object.assign({}, this.default_evaluators[0].data);\n        if(this.props.state_to_import) {\n            let matching_options = this.getOptions().filter(option => option.index === this.props.state_to_import.selected_item);\n            if (matching_options.length > 0) {\n                this.state = this.props.state_to_import;\n            }\n        }\n    }\n\n    changeHandler(which_aspect, value, distance) {\n        let new_values = Object.assign(this.state.values);\n        if(which_aspect === EVAL_ASPECTS.DISTANCE_MULTIPLIER) {\n            new_values[which_aspect][distance] = value;\n        } else {\n            new_values[which_aspect] = value;\n        }\n        this.setState({\"values\": new_values});\n    }\n\n    setValues(new_values) {\n        this.setState({\n            \"values\": Object.assign({}, new_values),\n        });\n    }\n\n    isSelectNew(selected_item=null) {\n        if(selected_item !== null) return selected_item===\"new\";\n        return this.getSelectValue() === \"new\";\n    }\n\n    getNewStringValue() {\n        return \"new\";\n    }\n\n    handleSelectChange() {\n        let new_value = this.getSelectValue();\n        if(new_value === \"new\") {\n            this.setValuesFull(Object.assign({}, this.default_evaluators[0]));\n        } else {\n            let valIndex = parseInt(new_value);\n            this.setValuesFull(Object.assign({}, this.state.saved_data[valIndex]), new_value);\n        }\n    }\n\n    setValuesFull(data, selected_item=\"new\", new_eval=null) {\n        if(new_eval===null) new_eval = data.data;\n        let loadedTitle = data.title;\n        let new_message = this.props.subject+\" '\"+loadedTitle+\"' displayed.\";\n        this.setValues(new_eval);\n        this.setState({\n            \"message\": new_message,\n            \"input_title\": loadedTitle,\n            \"selected_item\": selected_item.toString(),\n        });\n    }\n\n    getCurrentLayoutJSON() {\n        let l_title = \"Untitled Evaluator\";\n        if($('#layout-title').val() !== '') {\n            l_title = $('#layout-title').val();\n        }\n        return {\n            \"title\": l_title,\n            \"data\": Object.assign(this.state.values),\n        };\n    }\n\n    deleteAll() {\n        ls.remove(this.props.storage_key);\n        this.setValuesFull(Object.assign({}, this.default_evaluators[0]));\n        this.setState({\n            \"saved_data\": ls.get(this.props.storage_key) || [],\n            \"selected_item\": this.getNewStringValue(),\n            \"input_title\": \"\",\n            \"message\": \"All saved \"+this.props.subject_plural+\" have been deleted.\",\n        });\n    }\n\n    deleteCurrent() {\n        let currentIndex = this.getSelectValue();\n        let saved_data = Object.assign([], this.state.saved_data);\n        let toDel = saved_data.splice(parseInt(currentIndex), 1)[0];\n        ls.set(this.props.storage_key, saved_data);\n        this.setValuesFull(Object.assign(this.default_evaluators[0]));\n        this.setState({\n            \"input_title\": \"\",\n            \"selected_item\": this.getNewStringValue(),\n            \"message\": this.props.subject+\" '\"+toDel.title+\"' deleted.\",\n            \"saved_data\": ls.get(this.props.storage_key) || [],\n        });\n    }\n\n    loadDefault(index) {\n        let toLoad = this.default_evaluators[index];\n        let new_values = toLoad.data;\n        let loadedTitle = toLoad.title;\n        let new_message = \"Default evaluator '\"+loadedTitle+\"' displayed.\";\n        this.setValues(new_values);\n        this.setState({\n            \"message\": new_message,\n            \"input_title\": loadedTitle,\n            \"selected_item\": this.getNewStringValue(),\n        });\n    }\n\n    addLayoutsFromJSON(data) {\n        if(data.length>0) {\n            let saved_data = Object.assign([], this.state.saved_data);\n            for(let dataToSave of data) {\n                saved_data.push(dataToSave);\n            }\n            ls.set(this.props.storage_key, saved_data);\n            this.setValuesFull(saved_data[saved_data.length-1], saved_data.length-1);\n            this.setState({\n                \"saved_data\": ls.get(this.props.storage_key) || [],\n                \"message\": \"Evaluators loaded.\",\n                \"selected_item\": saved_data.length-1,\n                \"input_title\": saved_data[saved_data.length-1].title,\n            });\n        } else {\n            this.setState({\"message\": \"There were no \"+this.props.subject_plural+\" to load.\"})\n        }\n    }\n\n    getOptions() {\n        let options = [{\n            \"index\": \"new\",\n            \"title\": \"New Evaluator\",\n        }];\n        for(let [index, one_saved] of this.state.saved_data.entries()) {\n            options.push({\n                \"index\": index.toString(),\n                \"title\": one_saved.title,\n            });\n        }\n        return options;\n    }\n\n    render() {\n        let options = [];\n        for(let opt of this.getOptions()) {\n            options.push(\n                <option value={opt.index} key={opt.index}>{opt.title}</option>\n            );\n        }\n        let defaults = [];\n        for(let [index, one_default] of this.default_evaluators.entries()) {\n            defaults.push(\n                <p className=\"control\" key={index}>\n                    <button\n                        className=\"button is-small is-link\"\n                        onClick={()=>this.loadDefault(index)}\n                        key={\"default_layout_\"+index}\n                    >\n                        {one_default.title}\n                    </button>\n                </p>\n            )\n        }\n\n        return(\n            <div className=\"block\">\n                <h2 className=\"title is-size-4\">Evaluator Editor</h2>\n                <div className=\"block map-lab-control-panel\">\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Default Evaluators:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                {defaults}\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Saved Evaluators:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <span className=\"select is-small\">\n                                        <select\n                                            id=\"layout-select\"\n                                            value={this.state.selected_item}\n                                            onChange={()=>this.handleSelectChange()}\n                                        >\n                                            {options}\n                                        </select>\n                                    </span>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONDownloadButton\n                                        title=\"Download All\"\n                                        getDownloadInfo={()=>this.getAllLayoutJSONFileInfo()}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button onClick={()=>this.deleteAll()} className=\"button is-small\">\n                                        Delete All\n                                    </button>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONUploadButton\n                                        id=\"layout-json-upload\"\n                                        title=\"Upload\"\n                                        handleJSON={(data)=>this.addLayoutsFromJSON(data)}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"field is-horizontal\">\n                        <div className=\"field-label\">\n                            <label className=\"label\">Evaluator Title:</label>\n                        </div>\n                        <div className=\"field-body\">\n                            <div className=\"field is-grouped is-grouped-multiline\">\n                                <p className=\"control\">\n                                    <input\n                                        type=\"text\"\n                                        id=\"layout-title\"\n                                        value={this.state.input_title}\n                                        className=\"input is-small\"\n                                        onChange={function() {\n                                            this.setState(\n                                                {\n                                                    \"input_title\": document.getElementById(\"layout-title\").value,\n                                                    \"message\": \"\"\n                                                }\n                                            );\n                                        }.bind(this)}\n                                    />\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.saveCurrent()}>Save</button>\n                                </p>\n                                <p className=\"control\">\n                                    <button className=\"button is-small\" onClick={()=>this.handleSelectChange()}>Reset</button>\n                                </p>\n                                <p className=\"control\">\n                                    <button\n                                        onClick={()=>this.deleteCurrent()}\n                                        disabled={this.isSelectNew(this.state.selected_item)}\n                                        className=\"button is-small\"\n                                    >Delete</button>\n                                </p>\n                                <p className=\"control\">\n                                    <JSONDownloadButton\n                                        title=\"Download\"\n                                        getDownloadInfo={()=>this.getCurrentLayoutJSONFileInfo()}\n                                        className=\"button is-small\"\n                                    />\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    {this.getMessageHtml()}\n\n                </div>\n                <EvaluatorForm\n                    values={this.state.values}\n                    changeHandler={(which_aspect, value, distance)=>this.changeHandler(which_aspect, value, distance)}\n                />\n            </div>\n        );\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\n\nimport \"./styles/map-lab.scss\";\nimport {MapEditor} from \"./editors/map-editor\";\nimport {LayoutEditor} from './editors/layout-editor';\nimport {EvaluationEditor} from \"./editors/eval-editor\";\n\nimport $ from \"jquery\";\nwindow.jQuery = $;\n\nconst SCREENS = {\n    \"MAP_EDITOR\": 1,\n    \"LAYOUT_EDITOR\": 2,\n    \"SYSTEM_EVALUATOR\": 3,\n    \"INSTRUCTIONS\": 4,\n};\n\nfunction toggleMenu() {\n    $(\".navbar-burger\").toggleClass(\"is-active\");\n    $(\".navbar-menu\").toggleClass(\"is-active\");\n}\n\n\nclass MapLabNavigator extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            \"active_screen\": SCREENS.MAP_EDITOR,\n        };\n        this.map_state = null;\n        this.layout_state = null;\n        this.eval_state = null;\n    }\n\n    storeState(which_screen, state) {\n        switch(which_screen) {\n            case SCREENS.SYSTEM_EVALUATOR:\n                this.eval_state = state;\n                break;\n            case SCREENS.LAYOUT_EDITOR:\n                this.layout_state = state;\n                break;\n            case SCREENS.MAP_EDITOR:\n                this.map_state = state;\n                console.log(state);\n                break;\n            default:\n                break;\n        }\n    }\n\n    changeScreen(new_screen) {\n        this.setState({\n            \"active_screen\": new_screen,\n        });\n    }\n\n    render() {\n        let screen_return = null;\n        switch(this.state.active_screen) {\n            case SCREENS.MAP_EDITOR:\n                screen_return = (\n                    <MapEditor\n                        storage_key=\"maps\"\n                        subject=\"Map\"\n                        subject_plural=\"Maps\"\n                        layout_storage_key=\"layouts\"\n                        eval_storage_key=\"evaluators\"\n                        state_to_import={this.map_state}\n                        sendStateBeforeDeath={(state_to_store)=>this.storeState(SCREENS.MAP_EDITOR, state_to_store)}\n                    />\n                );\n                break;\n            case SCREENS.LAYOUT_EDITOR:\n                screen_return = (\n                    <LayoutEditor\n                        storage_key=\"layouts\"\n                        subject=\"Layout\"\n                        subject_plural=\"Layouts\"\n                        state_to_import={this.layout_state}\n                        sendStateBeforeDeath={(state_to_store)=>this.storeState(SCREENS.LAYOUT_EDITOR, state_to_store)}\n                    />\n                );\n                break;\n            case SCREENS.SYSTEM_EVALUATOR:\n                screen_return = (\n                    <EvaluationEditor\n                        storage_key=\"evaluators\"\n                        subject=\"Evaluator\"\n                        subject_plural=\"Evaluators\"\n                        state_to_import={this.eval_state}\n                        sendStateBeforeDeath={(state_to_store)=>this.storeState(SCREENS.SYSTEM_EVALUATOR, state_to_store)}\n                    />\n                );\n                break;\n            case SCREENS.INSTRUCTIONS:\n                screen_return = (\n                    <div className=\"block content\">\n                        <h2>Getting Started</h2>\n                        <h3>Basic Map Generation</h3>\n                        <ol>\n                            <li>Go to the Map Editor screen (the default screen).</li>\n                            <li>If you don't want the default 6-player map, choose another \"new from\" option under\n                                \"Saved/Defaults\"</li>\n                            <li>Scroll down and click \"Auto-Complete Map.\"</li>\n                            <li>Click the \"Improve Balance\" button a few times to make the map more fair according to the\n                                current Evaluator algorithm. The number in each Home System represents the strength of that\n                                home system's position based on the quality of and distance from systems on the map.</li>\n                            <li>Change \"Joebrew\" to another evaluator to get a different view on the\n                                strength of the home system positions.</li>\n                            <li>Drag and drop systems to switch them with each other as you wish (On mobile, click a\n                                system to send it back to the system bank, or click a space to put the currently selected\n                                system bank system in that space.)</li>\n                            <li>Name your map via \"Map Title\" and click \"Save\" at the top. Saves in your browser only.\n                                Can be loaded in the future from the \"Saved/Defaults\" dropdown.</li>\n                            <li>Copy the Map String or download the json file to share.</li>\n                        </ol>\n                        <h3>Building a Map From Scratch</h3>\n                        <ol>\n                            <li>Choose the layout you want to build from the \"Saved/Defaults\" dropdown.</li>\n                            <li>Scroll down to the System Bank and select the first system you want to place. (Suggestion:\n                                Start with the wormholes.) The system appears under the dropdown.</li>\n                            <li>Drag the system to the space where you want it. (On mobile, just touch the space.)</li>\n                            <li>Continue the above steps until you've placed all the systems you care about.</li>\n                            <li>Choose the desired blue/red target ratio from the dropdown under Auto-Complete.</li>\n                            <li>Click Auto-Complete to fill out the rest of the map.</li>\n                            <li>Change the \"Simple Slice\" dropdown to another evaluator algorithm for different perspectives\n                                on the strength of each home space's position.</li>\n                            <li>Use the \"Lock\" checkboxes to fix certain spaces in place, before clicking \"Improve Balance\"\n                                a few times to improve the overall system allocation.</li>\n                            <li>Don't forget to save your map at the top early and often.</li>\n                        </ol>\n                        <h3>Creating New Layouts</h3>\n                        <ol>\n                            <li>Choose \"Layout Editor\" at the top.</li>\n                            <li>Click spaces to cycle through \"open\" (open for systems), home system, closed, and\n                                Mecatol Rex.</li>\n                            <li>Use the checkboxes under \"Click Cycle\" to also include things like warp (hyperlane)\n                                hexes, anomalies, and/or wormholes.</li>\n                            <li>Be sure to name and save your layout. Once saved, as long as it doesn't have nonsensical\n                                warp hexes, it will appear in the map editor under its own \"New from...\" option.</li>\n                        </ol>\n                        <h3>Customize an Evaluator</h3>\n                        <ol>\n                            <li>Use the \"System Evaluator\" menu item at the top to make your own custom evaluations of\n                                planets, systems, and home system positions.</li>\n                            <li>The variables under \"Planet Evaluation\" define how much a planet is worth.</li>\n                            <li>The variables under \"System Evaluation\" define how much a system is worth by taken\n                                their planet values and adding these modifiers.</li>\n                            <li>The variables under \"Home to System Distance Evaluation\" define how far (in an abstracted\n                                sense) a home system is to each system, based on the kinds of hexes it has to go through\n                                to get there. \"Distance Base\" is added for every hex that must be moved into. The other modifiers,\n                                if set ot 1 or more, will increase that base hex number for those types of hexes. (Example:\n                                The path to a 2-planet system is through empty space, then through a nebula. In the evaluator, Base Hex\n                                is set to 2, empty space is set to 0, and nebula is set to 1. Therefore, it is 2 distance\n                                to move into the empty space, 3 to move into the nebula, and 2 to move into the 2-planet system.\n                                Therefore, the total modified distance is 7, even though the physical distance is only\n                                three hexes.)</li>\n                            <li>The variables under \"System Value Multipliers Based on Distance\" define what to multiply\n                                a system's worth by, based on the modified distance it is from a home system. Any modified\n                                distance above 10 is not eligible to hold value to the home system.</li>\n                            <li>Don't forget to save your evaluator. Then, it will show up uner the \"Improve Balance\" dropdown\n                                on the Map Editor screen.</li>\n                        </ol>\n                    </div>\n                );\n                break;\n            default:\n                break;\n        }\n\n\n        return(\n            <div className=\"block map-lab\">\n                <nav className=\"navbar is-primary\">\n                    <div className=\"navbar-brand\">\n                        <h1 className=\"title is-3 is-marginless\">TI4 Map Lab</h1>\n                        {/*eslint-disable-next-line*/}\n                        <a\n                            role=\"button\"\n                            className=\"navbar-burger is-\"\n                            aria-label=\"menu\"\n                            aria-expanded=\"false\"\n                            onClick={()=>toggleMenu()}\n                        >\n                            <span aria-hidden=\"true\"></span>\n                            <span aria-hidden=\"true\"></span>\n                            <span aria-hidden=\"true\"></span>\n                        </a>\n                    </div>\n                    <div className=\"navbar-menu\">\n                        <div className=\"navbar-start\">\n                        </div>\n                            <div className=\"navbar-end\">\n                                {/*eslint-disable-next-line*/}\n                                <a role=\"button\"\n                                    disabled={this.state.active_screen===SCREENS.INSTRUCTIONS}\n                                    onClick={()=>this.changeScreen(SCREENS.INSTRUCTIONS)}\n                                    className=\"navbar-item\"\n                                >\n                                    Instructions\n                                </a>\n                                {/*eslint-disable-next-line*/}\n                                <a role=\"button\"\n                                    disabled={this.state.active_screen===SCREENS.MAP_EDITOR}\n                                    onClick={()=>this.changeScreen(SCREENS.MAP_EDITOR)}\n                                    className=\"navbar-item\"\n                                >\n                                    Map Editor\n                                </a>\n                                {/*eslint-disable-next-line*/}\n                                <a role=\"button\"\n                                    disabled={this.state.active_screen===SCREENS.LAYOUT_EDITOR}\n                                    onClick={()=>this.changeScreen(SCREENS.LAYOUT_EDITOR)}\n                                    className=\"navbar-item\"\n                                >\n                                    Layout Editor\n                                </a>\n                                {/*eslint-disable-next-line*/}\n                                <a role=\"button\"\n                                    disabled={this.state.active_screen===SCREENS.SYSTEM_EVALUATOR}\n                                    onClick={()=>this.changeScreen(SCREENS.SYSTEM_EVALUATOR)}\n                                    className=\"navbar-item\"\n                                >\n                                    System Evaluator\n                                </a>\n                        </div>\n                    </div>\n                </nav>\n                {screen_return}\n            </div>\n        );\n    }\n\n}\n\nReactDOM.render(\n    <MapLabNavigator />,\n    document.getElementById('root')\n);\n\nserviceWorker.register();\n"],"sourceRoot":""}